<link rel="import" href="../../bower_components/polymer/polymer-element.html">

<!--
Not a true element. Used to isolate inside the same file the grammars
for the supported programming languages.

The grammars are based on Prism.css. Minor adjustements are necessary to use them:

- Use the syntax 'Object.assign({}, basic, clike, {...});'
  to inherit from other grammars defined above.

-->

<dom-module id="typio-grammars">
  <template>
    <style>
    </style>
  </template>

  <script>

// ////////////////////
// Language definitions
///////////////////////

const GRAMMARS = new Map();
const LANGUAGE_PER_EXTENSIONS = new Map();


// See https://github.com/PrismJS/prism/blob/gh-pages/components/
// for examples of language definitions.
{

  // Ancestors (should be declared before to avoid error 'is not defined'

  const basic = {
    'string': /"(?:""|[!#$%&'()*,\/:;<=>?^_ +\-.A-Z\d])*"/i,
    'comment': {
      pattern: /(?:!|REM\b).+/i,
      inside: {
        'keyword': /^REM/i
      }
    },
    'number': /(?:\b|\B[.-])(?:\d+\.?\d*)(?:E[+-]?\d+)?/i,
    'keyword': /\b(?:AS|BEEP|BLOAD|BSAVE|CALL(?: ABSOLUTE)?|CASE|CHAIN|CHDIR|CLEAR|CLOSE|CLS|COM|COMMON|CONST|DATA|DECLARE|DEF(?: FN| SEG|DBL|INT|LNG|SNG|STR)|DIM|DO|DOUBLE|ELSE|ELSEIF|END|ENVIRON|ERASE|ERROR|EXIT|FIELD|FILES|FOR|FUNCTION|GET|GOSUB|GOTO|IF|INPUT|INTEGER|IOCTL|KEY|KILL|LINE INPUT|LOCATE|LOCK|LONG|LOOP|LSET|MKDIR|NAME|NEXT|OFF|ON(?: COM| ERROR| KEY| TIMER)?|OPEN|OPTION BASE|OUT|POKE|PUT|READ|REDIM|REM|RESTORE|RESUME|RETURN|RMDIR|RSET|RUN|SHARED|SINGLE|SELECT CASE|SHELL|SLEEP|STATIC|STEP|STOP|STRING|SUB|SWAP|SYSTEM|THEN|TIMER|TO|TROFF|TRON|TYPE|UNLOCK|UNTIL|USING|VIEW PRINT|WAIT|WEND|WHILE|WRITE)(?:\$|\b)/i,
    'function': /\b(?:ABS|ACCESS|ACOS|ANGLE|AREA|ARITHMETIC|ARRAY|ASIN|ASK|AT|ATN|BASE|BEGIN|BREAK|CAUSE|CEIL|CHR|CLIP|COLLATE|COLOR|CON|COS|COSH|COT|CSC|DATE|DATUM|DEBUG|DECIMAL|DEF|DEG|DEGREES|DELETE|DET|DEVICE|DISPLAY|DOT|ELAPSED|EPS|ERASABLE|EXLINE|EXP|EXTERNAL|EXTYPE|FILETYPE|FIXED|FP|GO|GRAPH|HANDLER|IDN|IMAGE|IN|INT|INTERNAL|IP|IS|KEYED|LBOUND|LCASE|LEFT|LEN|LENGTH|LET|LINE|LINES|LOG|LOG10|LOG2|LTRIM|MARGIN|MAT|MAX|MAXNUM|MID|MIN|MISSING|MOD|NATIVE|NUL|NUMERIC|OF|OPTION|ORD|ORGANIZATION|OUTIN|OUTPUT|PI|POINT|POINTER|POINTS|POS|PRINT|PROGRAM|PROMPT|RAD|RADIANS|RANDOMIZE|RECORD|RECSIZE|RECTYPE|RELATIVE|REMAINDER|REPEAT|REST|RETRY|REWRITE|RIGHT|RND|ROUND|RTRIM|SAME|SEC|SELECT|SEQUENTIAL|SET|SETTER|SGN|SIN|SINH|SIZE|SKIP|SQR|STANDARD|STATUS|STR|STREAM|STYLE|TAB|TAN|TANH|TEMPLATE|TEXT|THERE|TIME|TIMEOUT|TRACE|TRANSFORM|TRUNCATE|UBOUND|UCASE|USE|VAL|VARIABLE|VIEWPORT|WHEN|WINDOW|WITH|ZER|ZONEWIDTH)(?:\$|\b)/i,
    'operator': /<[=>]?|>=?|[+\-*\/^=&]|\b(?:AND|EQV|IMP|NOT|OR|XOR)\b/i,
    'punctuation': /[,;:()]/
  };

  const clike = {
    'comment': [
      {
        pattern: /(^|[^\\])\/\*[\s\S]*?\*\//,
        lookbehind: true
      },
      {
        pattern: /(^|[^\\:])\/\/.*/,
        lookbehind: true
      }
    ],
    'string': {
      pattern: /(["'])(\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,
      greedy: true
    },
    'class-name': {
      pattern: /((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[a-z0-9_\.\\]+/i,
      lookbehind: true,
      inside: {
        punctuation: /(\.|\\)/
      }
    },
    'keyword': /\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,
    'boolean': /\b(true|false)\b/,
    'function': /[a-z0-9_]+(?=\()/i,
    'number': /\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)\b/i,
    'operator': /--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,
    'punctuation': /[{}[\];(),.:]/
  };

  const c = Object.assign({}, basic, clike, {
    'keyword': /\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|asm|typeof|inline|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|union|unsigned|void|volatile|while)\b/,
    'operator': /-[>-]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|\|?|[~^%?*\/]/,
    'number': /\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)[ful]*\b/i
  });

  const cpp = Object.assign({}, c, {
  	'keyword': /\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|class|compl|const|constexpr|const_cast|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|float|for|friend|goto|if|inline|int|long|mutable|namespace|new|noexcept|nullptr|operator|private|protected|public|register|reinterpret_cast|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,
  	'boolean': /\b(?:true|false)\b/,
  	'operator': /--?|\+\+?|!=?|<{1,2}=?|>{1,2}=?|->|:{1,2}|={1,2}|\^|~|%|&{1,2}|\|\|?|\?|\*|\/|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/
  });



  // Specific languages (Could extend previous languages to help reduce the verbosity of their definition)

  const ada = {
  	'comment': /--.*/,
  	'string': /"(?:""|[^"\r\f\n])*"/i,
  	'number': [
  		{
  			pattern: /\b\d(?:_?\d)*#[\dA-F](?:_?[\dA-F])*(?:\.[\dA-F](?:_?[\dA-F])*)?#(?:E[+-]?\d(?:_?\d)*)?/i
  		},
  		{
  			pattern: /\b\d(?:_?\d)*(?:\.\d(?:_?\d)*)?(?:E[+-]?\d(?:_?\d)*)?\b/i
  		}
  	],
  	'attr-name': /\b'\w+/i,
  	'keyword': /\b(?:abort|abs|abstract|accept|access|aliased|all|and|array|at|begin|body|case|constant|declare|delay|delta|digits|do|else|new|return|elsif|end|entry|exception|exit|for|function|generic|goto|if|in|interface|is|limited|loop|mod|not|null|of|others|out|overriding|package|pragma|private|procedure|protected|raise|range|record|rem|renames|requeue|reverse|select|separate|some|subtype|synchronized|tagged|task|terminate|then|type|until|use|when|while|with|xor)\b/i,
  	'boolean': /\b(?:true|false)\b/i,
  	'operator': /<[=>]?|>=?|=>?|:=|\/=?|\*\*?|[&+-]/,
  	'punctuation': /\.\.?|[,;():]/,
  	'char': /'.'/,
  	'variable': /\b[a-z](?:[_a-z\d])*\b/i
  };

  const applescript = {
  	'comment': [
  		// Allow one level of nesting
  		/\(\*(?:\(\*[\s\S]*?\*\)|[\s\S])*?\*\)/,
  		/--.+/,
  		/#.+/
  	],
  	'string': /"(?:\\.|[^"\\\r\n])*"/,
  	'number': /\b-?\d*\.?\d+([Ee]-?\d+)?\b/,
  	'operator': [
  		/[&=≠≤≥*+\-\/÷^]|[<>]=?/,
  		/\b(?:(?:start|begin|end)s? with|(?:(?:does not|doesn't) contain|contains?)|(?:is|isn't|is not) (?:in|contained by)|(?:(?:is|isn't|is not) )?(?:greater|less) than(?: or equal)?(?: to)?|(?:(?:does not|doesn't) come|comes) (?:before|after)|(?:is|isn't|is not) equal(?: to)?|(?:(?:does not|doesn't) equal|equals|equal to|isn't|is not)|(?:a )?(?:ref(?: to)?|reference to)|(?:and|or|div|mod|as|not))\b/
  	],
  	'keyword': /\b(?:about|above|after|against|apart from|around|aside from|at|back|before|beginning|behind|below|beneath|beside|between|but|by|considering|continue|copy|does|eighth|else|end|equal|error|every|exit|false|fifth|first|for|fourth|from|front|get|given|global|if|ignoring|in|instead of|into|is|it|its|last|local|me|middle|my|ninth|of|on|onto|out of|over|prop|property|put|repeat|return|returning|second|set|seventh|since|sixth|some|tell|tenth|that|the|then|third|through|thru|timeout|times|to|transaction|true|try|until|where|while|whose|with|without)\b/,
  	'class': {
  		pattern: /\b(?:alias|application|boolean|class|constant|date|file|integer|list|number|POSIX file|real|record|reference|RGB color|script|text|centimetres|centimeters|feet|inches|kilometres|kilometers|metres|meters|miles|yards|square feet|square kilometres|square kilometers|square metres|square meters|square miles|square yards|cubic centimetres|cubic centimeters|cubic feet|cubic inches|cubic metres|cubic meters|cubic yards|gallons|litres|liters|quarts|grams|kilograms|ounces|pounds|degrees Celsius|degrees Fahrenheit|degrees Kelvin)\b/,
  		alias: 'builtin'
  	},
  	'punctuation': /[{}():,¬«»《》]/
  };

  const arduino = Object.assign({}, cpp, {
  	'keyword': /\b(?:setup|if|else|while|do|for|return|in|instanceof|default|function|loop|goto|switch|case|new|try|throw|catch|finally|null|break|continue|boolean|bool|void|byte|word|string|String|array|int|long|integer|double)\b/,
  	'builtin': /\b(?:KeyboardController|MouseController|SoftwareSerial|EthernetServer|EthernetClient|LiquidCrystal|LiquidCrystal_I2C|RobotControl|GSMVoiceCall|EthernetUDP|EsploraTFT|HttpClient|RobotMotor|WiFiClient|GSMScanner|FileSystem|Scheduler|GSMServer|YunClient|YunServer|IPAddress|GSMClient|GSMModem|Keyboard|Ethernet|Console|GSMBand|Esplora|Stepper|Process|WiFiUDP|GSM_SMS|Mailbox|USBHost|Firmata|PImage|Client|Server|GSMPIN|FileIO|Bridge|Serial|EEPROM|Stream|Mouse|Audio|Servo|File|Task|GPRS|WiFi|Wire|TFT|GSM|SPI|SD|runShellCommandAsynchronously|analogWriteResolution|retrieveCallingNumber|printFirmwareVersion|analogReadResolution|sendDigitalPortPair|noListenOnLocalhost|readJoystickButton|setFirmwareVersion|readJoystickSwitch|scrollDisplayRight|getVoiceCallStatus|scrollDisplayLeft|writeMicroseconds|delayMicroseconds|beginTransmission|getSignalStrength|runAsynchronously|getAsynchronously|listenOnLocalhost|getCurrentCarrier|readAccelerometer|messageAvailable|sendDigitalPorts|lineFollowConfig|countryNameWrite|runShellCommand|readStringUntil|rewindDirectory|readTemperature|setClockDivider|readLightSensor|endTransmission|analogReference|detachInterrupt|countryNameRead|attachInterrupt|encryptionType|readBytesUntil|robotNameWrite|readMicrophone|robotNameRead|cityNameWrite|userNameWrite|readJoystickY|readJoystickX|mouseReleased|openNextFile|scanNetworks|noInterrupts|digitalWrite|beginSpeaker|mousePressed|isActionDone|mouseDragged|displayLogos|noAutoscroll|addParameter|remoteNumber|getModifiers|keyboardRead|userNameRead|waitContinue|processInput|parseCommand|printVersion|readNetworks|writeMessage|blinkVersion|cityNameRead|readMessage|setDataMode|parsePacket|isListening|setBitOrder|beginPacket|isDirectory|motorsWrite|drawCompass|digitalRead|clearScreen|serialEvent|rightToLeft|setTextSize|leftToRight|requestFrom|keyReleased|compassRead|analogWrite|interrupts|WiFiServer|disconnect|playMelody|parseFloat|autoscroll|getPINUsed|setPINUsed|setTimeout|sendAnalog|readSlider|analogRead|beginWrite|createChar|motorsStop|keyPressed|tempoWrite|readButton|subnetMask|debugPrint|macAddress|writeGreen|randomSeed|attachGPRS|readString|sendString|remotePort|releaseAll|mouseMoved|background|getXChange|getYChange|answerCall|getResult|voiceCall|endPacket|constrain|getSocket|writeJSON|getButton|available|connected|findUntil|readBytes|exitValue|readGreen|writeBlue|startLoop|IPAddress|isPressed|sendSysex|pauseMode|gatewayIP|setCursor|getOemKey|tuneWrite|noDisplay|loadImage|switchPIN|onRequest|onReceive|changePIN|playFile|noBuffer|parseInt|overflow|checkPIN|knobRead|beginTFT|bitClear|updateIR|bitWrite|position|writeRGB|highByte|writeRed|setSpeed|readBlue|noStroke|remoteIP|transfer|shutdown|hangCall|beginSMS|endWrite|attached|maintain|noCursor|checkReg|checkPUK|shiftOut|isValid|shiftIn|pulseIn|connect|println|localIP|pinMode|getIMEI|display|noBlink|process|getBand|running|beginSD|drawBMP|lowByte|setBand|release|bitRead|prepare|pointTo|readRed|setMode|noFill|remove|listen|stroke|detach|attach|noTone|exists|buffer|height|bitSet|circle|config|cursor|random|IRread|setDNS|endSMS|getKey|micros|millis|begin|print|write|ready|flush|width|isPIN|blink|clear|press|mkdir|rmdir|close|point|yield|image|BSSID|click|delay|read|text|move|peek|beep|rect|line|open|seek|fill|size|turn|stop|home|find|step|tone|sqrt|RSSI|SSID|end|bit|tan|cos|sin|pow|map|abs|max|min|get|run|put)\b/,
  	'constant': /\b(?:DIGITAL_MESSAGE|FIRMATA_STRING|ANALOG_MESSAGE|REPORT_DIGITAL|REPORT_ANALOG|INPUT_PULLUP|SET_PIN_MODE|INTERNAL2V56|SYSTEM_RESET|LED_BUILTIN|INTERNAL1V1|SYSEX_START|INTERNAL|EXTERNAL|DEFAULT|OUTPUT|INPUT|HIGH|LOW)\b/
  });

  const bash = {
		'shebang': {
			pattern: /^#!\s*\/bin\/bash|^#!\s*\/bin\/sh/,
			alias: 'important'
		},
		'comment': {
			pattern: /(^|[^"{\\])#.*/,
			lookbehind: true
		},
		'string': {
			pattern: /(["'])(?:\\[\s\S]|(?!\1)[^\\])*\1/,
			greedy: true
		},
		'function': {
			pattern: /(^|[\s;|&])(?:alias|apropos|apt-get|aptitude|aspell|awk|basename|bash|bc|bg|builtin|bzip2|cal|cat|cd|cfdisk|chgrp|chmod|chown|chroot|chkconfig|cksum|clear|cmp|comm|command|cp|cron|crontab|csplit|cut|date|dc|dd|ddrescue|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|du|egrep|eject|enable|env|ethtool|eval|exec|expand|expect|export|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|getopts|git|grep|groupadd|groupdel|groupmod|groups|gzip|hash|head|help|hg|history|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|jobs|join|kill|killall|less|link|ln|locate|logname|logout|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|make|man|mkdir|mkfifo|mkisofs|mknod|more|most|mount|mtools|mtr|mv|mmv|nano|netstat|nice|nl|nohup|notify-send|npm|nslookup|open|op|passwd|paste|pathchk|ping|pkill|popd|pr|printcap|printenv|printf|ps|pushd|pv|pwd|quota|quotacheck|quotactl|ram|rar|rcp|read|readarray|readonly|reboot|rename|renice|remsync|rev|rm|rmdir|rsync|screen|scp|sdiff|sed|seq|service|sftp|shift|shopt|shutdown|sleep|slocate|sort|source|split|ssh|stat|strace|su|sudo|sum|suspend|sync|tail|tar|tee|test|time|timeout|times|touch|top|traceroute|trap|tr|tsort|tty|type|ulimit|umask|umount|unalias|uname|unexpand|uniq|units|unrar|unshar|uptime|useradd|userdel|usermod|users|uuencode|uudecode|v|vdir|vi|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yes|zip)(?=$|[\s;|&])/,
			lookbehind: true
		},
		'keyword': {
			pattern: /(^|[\s;|&])(?:let|:|\.|if|then|else|elif|fi|for|break|continue|while|in|case|function|select|do|done|until|echo|exit|return|set|declare)(?=$|[\s;|&])/,
			lookbehind: true
		},
		'boolean': {
			pattern: /(^|[\s;|&])(?:true|false)(?=$|[\s;|&])/,
			lookbehind: true
		},
		'operator': /&&?|\|\|?|==?|!=?|<<<?|>>|<=?|>=?|=~/,
		'punctuation': /\$?\(\(?|\)\)?|\.\.|[{}[\];]/
	};

  const csharp = Object.assign({}, basic, clike, {
  	'keyword': /\b(abstract|as|async|await|base|bool|break|byte|case|catch|char|checked|class|const|continue|decimal|default|delegate|do|double|else|enum|event|explicit|extern|false|finally|fixed|float|for|foreach|goto|if|implicit|in|int|interface|internal|is|lock|long|namespace|new|null|object|operator|out|override|params|private|protected|public|readonly|ref|return|sbyte|sealed|short|sizeof|stackalloc|static|string|struct|switch|this|throw|true|try|typeof|uint|ulong|unchecked|unsafe|ushort|using|virtual|void|volatile|while|add|alias|ascending|async|await|descending|dynamic|from|get|global|group|into|join|let|orderby|partial|remove|select|set|value|var|where|yield)\b/,
  	'string': [
  		{
  			pattern: /@("|')(?:\1\1|\\[\s\S]|(?!\1)[^\\])*\1/,
  			greedy: true
  		},
  		{
  			pattern: /("|')(?:\\.|(?!\1)[^\\\r\n])*?\1/,
  			greedy: true
  		}
  	],
  	'number': /\b-?(?:0x[\da-f]+|\d*\.?\d+f?)\b/i
  });

  const css = {
  	'comment': /\/\*[\s\S]*?\*\//,
  	'atrule': {
  		pattern: /@[\w-]+?.*?(?:;|(?=\s*\{))/i,
  		inside: {
  			'rule': /@[\w-]+/
  			// See rest below
  		}
  	},
  	'url': /url\((?:(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1|.*?)\)/i,
  	'selector': /[^{}\s][^{};]*?(?=\s*\{)/,
  	'string': {
  		pattern: /("|')(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,
  		greedy: true
  	},
  	'property': /[-_a-z\xA0-\uFFFF][-\w\xA0-\uFFFF]*(?=\s*:)/i,
  	'important': /\B!important\b/i,
  	'function': /[-a-z0-9]+(?=\()/i,
  	'punctuation': /[(){};:]/
  };

  const dart = Object.assign({}, basic, clike, {
  	'string': [
  		{
  			pattern: /r?("""|''')[\s\S]*?\1/,
  			greedy: true
  		},
  		{
  			pattern: /r?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/,
  			greedy: true
  		}
  	],
  	'keyword': [
  		/\b(?:async|sync|yield)\*/,
  		/\b(?:abstract|assert|async|await|break|case|catch|class|const|continue|default|deferred|do|dynamic|else|enum|export|external|extends|factory|final|finally|for|get|if|implements|import|in|library|new|null|operator|part|rethrow|return|set|static|super|switch|this|throw|try|typedef|var|void|while|with|yield)\b/
  	],
  	'operator': /\bis!|\b(?:as|is)\b|\+\+|--|&&|\|\||<<=?|>>=?|~(?:\/=?)?|[+\-*\/%&^|=!<>]=?|\?/
  });

  const docker = {
  	'keyword': {
  		pattern: /(^\s*)(?:ADD|ARG|CMD|COPY|ENTRYPOINT|ENV|EXPOSE|FROM|HEALTHCHECK|LABEL|MAINTAINER|ONBUILD|RUN|SHELL|STOPSIGNAL|USER|VOLUME|WORKDIR)(?=\s)/mi,
  		lookbehind: true
  	},
  	'string': /("|')(?:(?!\1)[^\\\r\n]|\\(?:\r\n|[\s\S]))*\1/,
  	'comment': /#.*/,
  	'punctuation': /---|\.\.\.|[:[\]{}\-,|>?]/
  };

  const eiffel = {
  	'comment': /--.*/,
  	'string': [
  		// Aligned-verbatim-strings
  		{
  			pattern: /"([^[]*)\[[\s\S]+?\]\1"/,
  			greedy: true
  		},
  		// Non-aligned-verbatim-strings
  		{
  			pattern: /"([^{]*)\{[\s\S]+?\}\1"/,
  			greedy: true
  		},
  		// Single-line string
  		{
  			pattern: /"(?:%\s+%|%.|[^%"\r\n])*"/,
  			greedy: true
  		}
  	],
  	// normal char | special char | char code
  	'char': /'(?:%.|[^%'\r\n])+'/,
  	'keyword': /\b(?:across|agent|alias|all|and|attached|as|assign|attribute|check|class|convert|create|Current|debug|deferred|detachable|do|else|elseif|end|ensure|expanded|export|external|feature|from|frozen|if|implies|inherit|inspect|invariant|like|local|loop|not|note|obsolete|old|once|or|Precursor|redefine|rename|require|rescue|Result|retry|select|separate|some|then|undefine|until|variant|Void|when|xor)\b/i,
  	'boolean': /\b(?:True|False)\b/i,
  	// Convention: class-names are always all upper-case characters
  	'class-name': {
  		'pattern': /\b[A-Z][\dA-Z_]*\b/,
  		'alias': 'builtin'
  	},
  	'number': [
  		// hexa | octal | bin
  		/\b0[xcb][\da-f](?:_*[\da-f])*\b/i,
  		// Decimal
  		/(?:\d(?:_*\d)*)?\.(?:(?:\d(?:_*\d)*)?[eE][+-]?)?\d(?:_*\d)*|\d(?:_*\d)*\.?/
  	],
  	'punctuation': /:=|<<|>>|\(\||\|\)|->|\.(?=\w)|[{}[\];(),:?]/,
  	'operator': /\\\\|\|\.\.\||\.\.|\/[~\/=]?|[><]=?|[-+*^=~]/
  };

  const elixir = {
  	// Negative look-ahead is needed for string interpolation
  	// Negative look-behind is needed to avoid highlighting markdown headers in
  	// multi-line doc strings
  	'comment': {
  		pattern: /(^|[^#])#(?![{#]).*/m,
  		lookbehind: true
  	},
  	'regex': /~[rR](?:("""|''')(?:\\[\s\S]|(?!\1)[^\\])+\1|([\/|"'])(?:\\.|(?!\2)[^\\\r\n])+\2|\((?:\\.|[^\\)\r\n])+\)|\[(?:\\.|[^\\\]\r\n])+\]|\{(?:\\.|[^\\}\r\n])+\}|<(?:\\.|[^\\>\r\n])+>)[uismxfr]*/,
  	'string': [
  		{
  			pattern: /~[cCsSwW](?:("""|''')(?:\\[\s\S]|(?!\1)[^\\])+\1|([\/|"'])(?:\\.|(?!\2)[^\\\r\n])+\2|\((?:\\.|[^\\)\r\n])+\)|\[(?:\\.|[^\\\]\r\n])+\]|\{(?:\\.|#\{[^}]+\}|[^\\}\r\n])+\}|<(?:\\.|[^\\>\r\n])+>)[csa]?/,
  			greedy: true,
  			inside: {
  				// See interpolation below
  			}
  		},
  		{
  			pattern: /("""|''')[\s\S]*?\1/,
  			greedy: true,
  			inside: {
  				// See interpolation below
  			}
  		},
  		{
  			// Multi-line strings are allowed
  			pattern: /("|')(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,
  			greedy: true,
  			inside: {
  				// See interpolation below
  			}
  		}
  	],
  	'atom': {
  		// Look-behind prevents bad highlighting of the :: operator
  		pattern: /(^|[^:]):\w+/,
  		lookbehind: true,
  		alias: 'symbol'
  	},
  	// Look-ahead prevents bad highlighting of the :: operator
  	'attr-name': /\w+:(?!:)/,
  	'capture': {
  		// Look-behind prevents bad highlighting of the && operator
  		pattern: /(^|[^&])&(?:[^&\s\d()][^\s()]*|(?=\())/,
  		lookbehind: true,
  		alias: 'function'
  	},
  	'argument': {
  		// Look-behind prevents bad highlighting of the && operator
  		pattern: /(^|[^&])&\d+/,
  		lookbehind: true,
  		alias: 'variable'
  	},
  	'attribute': {
  		pattern: /@[\S]+/,
  		alias: 'variable'
  	},
  	'number': /\b(?:0[box][a-f\d_]+|\d[\d_]*)(?:\.[\d_]+)?(?:e[+-]?[\d_]+)?\b/i,
  	'keyword': /\b(?:after|alias|and|case|catch|cond|def(?:callback|exception|impl|module|p|protocol|struct)?|do|else|end|fn|for|if|import|not|or|require|rescue|try|unless|use|when)\b/,
  	'boolean': /\b(?:true|false|nil)\b/,
  	'operator': [
  		/\bin\b|&&?|\|[|>]?|\\\\|::|\.\.\.?|\+\+?|-[->]?|<[-=>]|>=|!==?|\B!|=(?:==?|[>~])?|[*\/^]/,
  		{
  			// We don't want to match <<
  			pattern: /([^<])<(?!<)/,
  			lookbehind: true
  		},
  		{
  			// We don't want to match >>
  			pattern: /([^>])>(?!>)/,
  			lookbehind: true
  		}
  	],
  	'punctuation': /<<|>>|[.,%\[\]{}()]/
  };

  const erlang = {
  	'comment': /%.+/,
  	'string': {
  		pattern: /"(?:\\.|[^\\"\r\n])*"/,
  		greedy: true
  	},
  	'quoted-function': {
  		pattern: /'(?:\\.|[^\\'\r\n])+'(?=\()/,
  		alias: 'function'
  	},
  	'quoted-atom': {
  		pattern: /'(?:\\.|[^\\'\r\n])+'/,
  		alias: 'atom'
  	},
  	'boolean': /\b(?:true|false)\b/,
  	'keyword': /\b(?:fun|when|case|of|end|if|receive|after|try|catch)\b/,
  	'number': [
  		/\$\\?./,
  		/\d+#[a-z0-9]+/i,
  		/(?:\b|-)\d*\.?\d+([Ee][+-]?\d+)?\b/
  	],
  	'function': /\b[a-z][\w@]*(?=\()/,
  	'variable': {
  		// Look-behind is used to prevent wrong highlighting of atoms containing "@"
  		pattern: /(^|[^@])(?:\b|\?)[A-Z_][\w@]*/,
  		lookbehind: true
  	},
  	'operator': [
  		/[=\/<>:]=|=[:\/]=|\+\+?|--?|[=*\/!]|\b(?:bnot|div|rem|band|bor|bxor|bsl|bsr|not|and|or|xor|orelse|andalso)\b/,
  		{
  			// We don't want to match <<
  			pattern: /(^|[^<])<(?!<)/,
  			lookbehind: true
  		},
  		{
  			// We don't want to match >>
  			pattern: /(^|[^>])>(?!>)/,
  			lookbehind: true
  		}
  	],
  	'atom': /\b[a-z][\w@]*/,
  	'punctuation': /[()[\]{}:;,.#|]|<<|>>/
  };

  const fortran = {
  	'quoted-number': {
  		pattern: /[BOZ](['"])[A-F0-9]+\1/i,
  		alias: 'number'
  	},
  	'string': {
  		pattern: /(?:\w+_)?(['"])(?:\1\1|&(?:\r\n?|\n)(?:\s*!.+(?:\r\n?|\n))?|(?!\1).)*(?:\1|&)/,
  		inside: {
  			'comment': {
  				pattern: /(&(?:\r\n?|\n)\s*)!.*/,
  				lookbehind: true
  			}
  		}
  	},
  	'comment': /!.*/,
  	'boolean': /\.(?:TRUE|FALSE)\.(?:_\w+)?/i,
  	'number': /(?:\b|[+-])(?:\d+(?:\.\d*)?|\.\d+)(?:[ED][+-]?\d+)?(?:_\w+)?/i,
  	'keyword': [
  		// Types
  		/\b(?:INTEGER|REAL|DOUBLE ?PRECISION|COMPLEX|CHARACTER|LOGICAL)\b/i,
  		// END statements
  		/\b(?:END ?)?(?:BLOCK ?DATA|DO|FILE|FORALL|FUNCTION|IF|INTERFACE|MODULE(?! PROCEDURE)|PROGRAM|SELECT|SUBROUTINE|TYPE|WHERE)\b/i,
  		// Statements
  		/\b(?:ALLOCATABLE|ALLOCATE|BACKSPACE|CALL|CASE|CLOSE|COMMON|CONTAINS|CONTINUE|CYCLE|DATA|DEALLOCATE|DIMENSION|DO|END|EQUIVALENCE|EXIT|EXTERNAL|FORMAT|GO ?TO|IMPLICIT(?: NONE)?|INQUIRE|INTENT|INTRINSIC|MODULE PROCEDURE|NAMELIST|NULLIFY|OPEN|OPTIONAL|PARAMETER|POINTER|PRINT|PRIVATE|PUBLIC|READ|RETURN|REWIND|SAVE|SELECT|STOP|TARGET|WHILE|WRITE)\b/i,
  		// Others
  		/\b(?:ASSIGNMENT|DEFAULT|ELEMENTAL|ELSE|ELSEWHERE|ELSEIF|ENTRY|IN|INCLUDE|INOUT|KIND|NULL|ONLY|OPERATOR|OUT|PURE|RECURSIVE|RESULT|SEQUENCE|STAT|THEN|USE)\b/i
  	],
  	'operator': [
  		/\*\*|\/\/|=>|[=\/]=|[<>]=?|::|[+\-*=%]|\.(?:EQ|NE|LT|LE|GT|GE|NOT|AND|OR|EQV|NEQV)\.|\.[A-Z]+\./i,
  		{
  			// Use lookbehind to prevent confusion with (/ /)
  			pattern: /(^|(?!\().)\/(?!\))/,
  			lookbehind: true
  		}
  	],
  	'punctuation': /\(\/|\/\)|[(),;:&]/
  };

  const go = Object.assign({}, basic, clike, {
  	'keyword': /\b(?:break|case|chan|const|continue|default|defer|else|fallthrough|for|func|go(?:to)?|if|import|interface|map|package|range|return|select|struct|switch|type|var)\b/,
  	'builtin': /\b(?:bool|byte|complex(?:64|128)|error|float(?:32|64)|rune|string|u?int(?:8|16|32|64)?|uintptr|append|cap|close|complex|copy|delete|imag|len|make|new|panic|print(?:ln)?|real|recover)\b/,
  	'boolean': /\b(?:_|iota|nil|true|false)\b/,
  	'operator': /[*\/%^!=]=?|\+[=+]?|-[=-]?|\|[=|]?|&(?:=|&|\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\.\.\./,
  	'number': /\b(-?(0x[a-f\d]+|(\d+\.?\d*|\.\d+)(e[-+]?\d+)?)i?)\b/i,
  	'string': {
  		pattern: /(["'`])(\\[\s\S]|(?!\1)[^\\])*\1/,
  		greedy: true
  	}
  });

  const groovy = Object.assign({}, basic, clike, {
  	'keyword': /\b(?:as|def|in|abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|native|new|package|private|protected|public|return|short|static|strictfp|super|switch|synchronized|this|throw|throws|trait|transient|try|void|volatile|while)\b/,
  	'string': [
  		{
  			pattern: /("""|''')[\s\S]*?\1|(?:\$\/)(?:\$\/\$|[\s\S])*?\/\$/,
  			greedy: true
  		},
  		{
  			pattern: /(["'\/])(?:\\.|(?!\1)[^\\\r\n])*\1/,
  			greedy: true
  		}
  	],
    'annotation': {
  		alias: 'punctuation',
  		pattern: /(^|[^.])@\w+/,
  		lookbehind: true
  	},
  	'number': /\b(?:0b[01_]+|0x[\da-f_]+(?:\.[\da-f_p\-]+)?|[\d_]+(?:\.[\d_]+)?(?:e[+-]?[\d]+)?)[glidf]?\b/i,
  	'operator': {
  		pattern: /(^|[^.])(?:~|==?~?|\?[.:]?|\*(?:[.=]|\*=?)?|\.[@&]|\.\.<|\.{1,2}(?!\.)|-[-=>]?|\+[+=]?|!=?|<(?:<=?|=>?)?|>(?:>>?=?|=)?|&[&=]?|\|[|=]?|\/=?|\^=?|%=?)/,
  		lookbehind: true
  	},
    'spock-block': /\b(?:setup|given|when|then|and|cleanup|expect|where):/,
  	'punctuation': /\.+|[{}[\];(),:$]/
  });

  const haskell= {
  	'comment': {
  		pattern: /(^|[^-!#$%*+=?&@|~.:<>^\\\/])(?:--[^-!#$%*+=?&@|~.:<>^\\\/].*|{-[\s\S]*?-})/m,
  		lookbehind: true
  	},
  	'char': /'(?:[^\\']|\\(?:[abfnrtv\\"'&]|\^[A-Z@[\]^_]|NUL|SOH|STX|ETX|EOT|ENQ|ACK|BEL|BS|HT|LF|VT|FF|CR|SO|SI|DLE|DC1|DC2|DC3|DC4|NAK|SYN|ETB|CAN|EM|SUB|ESC|FS|GS|RS|US|SP|DEL|\d+|o[0-7]+|x[0-9a-fA-F]+))'/,
  	'string': {
  		pattern: /"(?:[^\\"]|\\(?:[abfnrtv\\"'&]|\^[A-Z@[\]^_]|NUL|SOH|STX|ETX|EOT|ENQ|ACK|BEL|BS|HT|LF|VT|FF|CR|SO|SI|DLE|DC1|DC2|DC3|DC4|NAK|SYN|ETB|CAN|EM|SUB|ESC|FS|GS|RS|US|SP|DEL|\d+|o[0-7]+|x[0-9a-fA-F]+)|\\\s+\\)*"/,
  		greedy: true
  	},
  	'keyword' : /\b(?:case|class|data|deriving|do|else|if|in|infixl|infixr|instance|let|module|newtype|of|primitive|then|type|where)\b/,
  	'import_statement' : {
  		// The imported or hidden names are not included in this import
  		// statement. This is because we want to highlight those exactly like
  		// we do for the names in the program.
  		pattern: /((?:\r?\n|\r|^)\s*)import\s+(?:qualified\s+)?(?:[A-Z][\w']*)(?:\.[A-Z][\w']*)*(?:\s+as\s+(?:[A-Z][_a-zA-Z0-9']*)(?:\.[A-Z][\w']*)*)?(?:\s+hiding\b)?/m,
  		lookbehind: true,
  		inside: {
  			'keyword': /\b(?:import|qualified|as|hiding)\b/
  		}
  	},
  	// These are builtin variables only. Constructors are highlighted later as a constant.
  	'builtin': /\b(?:abs|acos|acosh|all|and|any|appendFile|approxRational|asTypeOf|asin|asinh|atan|atan2|atanh|basicIORun|break|catch|ceiling|chr|compare|concat|concatMap|const|cos|cosh|curry|cycle|decodeFloat|denominator|digitToInt|div|divMod|drop|dropWhile|either|elem|encodeFloat|enumFrom|enumFromThen|enumFromThenTo|enumFromTo|error|even|exp|exponent|fail|filter|flip|floatDigits|floatRadix|floatRange|floor|fmap|foldl|foldl1|foldr|foldr1|fromDouble|fromEnum|fromInt|fromInteger|fromIntegral|fromRational|fst|gcd|getChar|getContents|getLine|group|head|id|inRange|index|init|intToDigit|interact|ioError|isAlpha|isAlphaNum|isAscii|isControl|isDenormalized|isDigit|isHexDigit|isIEEE|isInfinite|isLower|isNaN|isNegativeZero|isOctDigit|isPrint|isSpace|isUpper|iterate|last|lcm|length|lex|lexDigits|lexLitChar|lines|log|logBase|lookup|map|mapM|mapM_|max|maxBound|maximum|maybe|min|minBound|minimum|mod|negate|not|notElem|null|numerator|odd|or|ord|otherwise|pack|pi|pred|primExitWith|print|product|properFraction|putChar|putStr|putStrLn|quot|quotRem|range|rangeSize|read|readDec|readFile|readFloat|readHex|readIO|readInt|readList|readLitChar|readLn|readOct|readParen|readSigned|reads|readsPrec|realToFrac|recip|rem|repeat|replicate|return|reverse|round|scaleFloat|scanl|scanl1|scanr|scanr1|seq|sequence|sequence_|show|showChar|showInt|showList|showLitChar|showParen|showSigned|showString|shows|showsPrec|significand|signum|sin|sinh|snd|sort|span|splitAt|sqrt|subtract|succ|sum|tail|take|takeWhile|tan|tanh|threadToIOResult|toEnum|toInt|toInteger|toLower|toRational|toUpper|truncate|uncurry|undefined|unlines|until|unwords|unzip|unzip3|userError|words|writeFile|zip|zip3|zipWith|zipWith3)\b/,
  	// decimal integers and floating point numbers | octal integers | hexadecimal integers
  	'number' : /\b(?:\d+(?:\.\d+)?(?:e[+-]?\d+)?|0o[0-7]+|0x[0-9a-f]+)\b/i,
  	// Most of this is needed because of the meaning of a single '.'.
  	// If it stands alone freely, it is the function composition.
  	// It may also be a separator between a module name and an identifier => no
  	// operator. If it comes together with other special characters it is an
  	// operator too.
  	'operator' : /\s\.\s|[-!#$%*+=?&@|~.:<>^\\\/]*\.[-!#$%*+=?&@|~.:<>^\\\/]+|[-!#$%*+=?&@|~.:<>^\\\/]+\.[-!#$%*+=?&@|~.:<>^\\\/]*|[-!#$%*+=?&@|~:<>^\\\/]+|`([A-Z][\w']*\.)*[_a-z][\w']*`/,
  	// In Haskell, nearly everything is a variable, do not highlight these.
  	'hvariable': /\b(?:[A-Z][\w']*\.)*[_a-z][\w']*\b/,
  	'constant': /\b(?:[A-Z][\w']*\.)*[A-Z][\w']*\b/,
  	'punctuation' : /[{}[\];(),.:]/
  };

  const java = Object.assign({}, basic, clike, {
    'keyword': /\b(abstract|continue|for|new|switch|assert|default|goto|package|synchronized|boolean|do|if|private|this|break|double|implements|protected|throw|byte|else|import|public|throws|case|enum|instanceof|return|transient|catch|extends|int|short|try|char|final|interface|static|void|class|finally|long|strictfp|volatile|const|float|native|super|while)\b/,
    'number': /\b0b[01]+\b|\b0x[\da-f]*\.?[\da-fp\-]+\b|\b\d*\.?\d+(?:e[+-]?\d+)?[df]?\b/i,
    'operator': {
      pattern: /(^|[^.])(?:\+[+=]?|-[-=]?|!=?|<<?=?|>>?>?=?|==?|&[&=]?|\|[|=]?|\*=?|\/=?|%=?|\^=?|[?:~])/m,
      lookbehind: true
    }
  });

  const javascript = Object.assign({}, basic, clike, {
  	'keyword': /\b(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|var|void|while|with|yield)\b/,
  	'number': /\b-?(?:0[xX][\dA-Fa-f]+|0[bB][01]+|0[oO][0-7]+|\d*\.?\d+(?:[Ee][+-]?\d+)?|NaN|Infinity)\b/,
  	// Allow for all non-ASCII characters (See http://stackoverflow.com/a/2008444)
  	'function': /[_$a-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*\()/i,
  	'operator': /-[-=]?|\+[+=]?|!=?=?|<<?=?|>>?>?=?|=(?:==?|>)?|&[&=]?|\|[|=]?|\*\*?=?|\/=?|~|\^=?|%=?|\?|\.{3}/
  });

  const json = {
  	'property': /"(?:\\.|[^\\"\r\n])*"(?=\s*:)/i,
  	'string': {
  		pattern: /"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,
  		greedy: true
  	},
  	'number': /\b-?(?:0x[\dA-Fa-f]+|\d*\.?\d+(?:[Ee][+-]?\d+)?)\b/,
  	'punctuation': /[{}[\]);,]/,
  	'operator': /:/g,
  	'boolean': /\b(?:true|false)\b/i,
  	'null': /\bnull\b/i
  };

  const julia = {
  	'comment': {
  		pattern: /(^|[^\\])#.*/,
  		lookbehind: true
  	},
  	'string': /("""|''')[\s\S]+?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2/,
  	'keyword' : /\b(?:abstract|baremodule|begin|bitstype|break|catch|ccall|const|continue|do|else|elseif|end|export|finally|for|function|global|if|immutable|import|importall|let|local|macro|module|print|println|quote|return|try|type|typealias|using|while)\b/,
  	'boolean' : /\b(?:true|false)\b/,
  	'number' : /\b-?(?:0[box])?(?:[\da-f]+\.?\d*|\.\d+)(?:[efp][+-]?\d+)?j?\b/i,
  	'operator': /[-+*^%÷&$\\]=?|\/[\/=]?|!=?=?|\|[=>]?|<(?:<=?|[=:])?|>(?:=|>>?=?)?|==?=?|[~≠≤≥]/,
  	'punctuation' : /[{}[\];(),.:]/
  };

  const kotlin = Object.assign({}, basic, clike, {
		'keyword': {
			pattern: /(^|[^.])\b(?:abstract|annotation|as|break|by|catch|class|companion|const|constructor|continue|crossinline|data|do|else|enum|final|finally|for|fun|get|if|import|in|init|inline|inner|interface|internal|is|lateinit|noinline|null|object|open|out|override|package|private|protected|public|reified|return|sealed|set|super|tailrec|this|throw|to|try|val|var|when|where|while)\b/,
			lookbehind: true
		},
		'function': [
			/\w+(?=\s*\()/,
			{
				pattern: /(\.)\w+(?=\s*\{)/,
				lookbehind: true
			}
		],
		'number': /\b(?:0[bx][\da-fA-F]+|\d+(?:\.\d+)?(?:e[+-]?\d+)?[fFL]?)\b/,
		'operator': /\+[+=]?|-[-=>]?|==?=?|!(?:!|==?)?|[\/*%<>]=?|[?:]:?|\.\.|&&|\|\||\b(?:and|inv|or|shl|shr|ushr|xor)\b/
	});

  const less = Object.assign({}, css, {
  	'comment': [
  		/\/\*[\s\S]*?\*\//,
  		{
  			pattern: /(^|[^\\])\/\/.*/,
  			lookbehind: true
  		}
  	],
  	'atrule': {
  		pattern: /@[\w-]+?(?:\([^{}]+\)|[^(){};])*?(?=\s*\{)/i,
  		inside: {
  			'punctuation': /[:()]/
  		}
  	},
  	// selectors and mixins are considered the same
  	'selector': {
  		pattern: /(?:@\{[\w-]+\}|[^{};\s@])(?:@\{[\w-]+\}|\([^{}]*\)|[^{};@])*?(?=\s*\{)/,
  		inside: {
  			// mixin parameters
  			'variable': /@+[\w-]+/
  		}
  	},

  	'property': /(?:@\{[\w-]+\}|[\w-])+(?:\+_?)?(?=\s*:)/i,
  	'punctuation': /[{}();:,]/,
  	'operator': /[+\-*\/]/
  });

  const lua = {
  	'comment': /^#!.+|--(?:\[(=*)\[[\s\S]*?\]\1\]|.*)/m,
  	// \z may be used to skip the following space
  	'string': {
  		pattern: /(["'])(?:(?!\1)[^\\\r\n]|\\z(?:\r\n|\s)|\\(?:\r\n|[\s\S]))*\1|\[(=*)\[[\s\S]*?\]\2\]/,
  		greedy: true
  	},
  	'number': /\b0x[a-f\d]+\.?[a-f\d]*(?:p[+-]?\d+)?\b|\b\d+(?:\.\B|\.?\d*(?:e[+-]?\d+)?\b)|\B\.\d+(?:e[+-]?\d+)?\b/i,
  	'keyword': /\b(?:and|break|do|else|elseif|end|false|for|function|goto|if|in|local|nil|not|or|repeat|return|then|true|until|while)\b/,
  	'function': /(?!\d)\w+(?=\s*(?:[({]))/,
  	'operator': [
  		/[-+*%^&|#]|\/\/?|<[<=]?|>[>=]?|[=~]=?/,
  		{
  			// Match ".." but don't break "..."
  			pattern: /(^|[^.])\.\.(?!\.)/,
  			lookbehind: true
  		}
  	],
  	'punctuation': /[\[\](){},;]|\.+|:+/
  };

  const makefile = {
  	'comment': {
  		pattern: /(^|[^\\])#(?:\\(?:\r\n|[\s\S])|[^\\\r\n])*/,
  		lookbehind: true
  	},
  	'string': {
  		pattern: /(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,
  		greedy: true
  	},

  	// Built-in target names
  	'builtin': /\.[A-Z][^:#=\s]+(?=\s*:(?!=))/,

  	// Targets
  	'symbol': {
  		pattern: /^[^:=\r\n]+(?=\s*:(?!=))/m,
  		inside: {
  			'variable': /\$+(?:[^(){}:#=\s]+|(?=[({]))/
  		}
  	},
  	'variable': /\$+(?:[^(){}:#=\s]+|\([@*%<^+?][DF]\)|(?=[({]))/,

  	'keyword': [
  		// Directives
  		/-include\b|\b(?:define|else|endef|endif|export|ifn?def|ifn?eq|include|override|private|sinclude|undefine|unexport|vpath)\b/,
  		// Functions
  		{
  			pattern: /(\()(?:addsuffix|abspath|and|basename|call|dir|error|eval|file|filter(?:-out)?|findstring|firstword|flavor|foreach|guile|if|info|join|lastword|load|notdir|or|origin|patsubst|realpath|shell|sort|strip|subst|suffix|value|warning|wildcard|word(?:s|list)?)(?=[ \t])/,
  			lookbehind: true
  		}
  	],
  	'operator': /(?:::|[?:+!])?=|[|@]/,
  	'punctuation': /[:;(){}]/
  };

  const markup = {
  	'comment': /<!--[\s\S]*?-->/,
  	'prolog': /<\?[\s\S]+?\?>/,
  	'doctype': /<!DOCTYPE[\s\S]+?>/i,
  	'cdata': /<!\[CDATA\[[\s\S]*?]]>/i,
  	'tag': {
  		pattern: /<\/?(?!\d)[^\s>\/=$<]+(?:\s+[^\s>\/=]+(?:=(?:("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|[^\s'">=]+))?)*\s*\/?>/i,
  		inside: {
  			'tag': {
  				pattern: /^<\/?[^\s>\/]+/i,
  				inside: {
  					'punctuation': /^<\/?/,
  					'namespace': /^[^\s>\/:]+:/
  				}
  			},
  			'attr-value': {
  				pattern: /=(?:("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|[^\s'">=]+)/i,
  				inside: {
  					'punctuation': [
  						/^=/,
  						{
  							pattern: /(^|[^\\])["']/,
  							lookbehind: true
  						}
  					]
  				}
  			},
  			'punctuation': /\/?>/,
  			'attr-name': {
  				pattern: /[^\s>\/]+/,
  				inside: {
  					'namespace': /^[^\s>\/:]+:/
  				}
  			}

  		}
  	},
  	'entity': /&#?[\da-z]{1,8};/i
  };

  const matlab = {
  	'comment': [
  		/%\{[\s\S]*?\}%/,
  		/%.+/
  	],
  	'string': {
  		pattern: /\B'(?:''|[^'\r\n])*'/,
  		greedy: true
  	},
  	// FIXME We could handle imaginary numbers as a whole
  	'number': /\b-?(?:\d*\.?\d+(?:[eE][+-]?\d+)?(?:[ij])?|[ij])\b/,
  	'keyword': /\b(?:break|case|catch|continue|else|elseif|end|for|function|if|inf|NaN|otherwise|parfor|pause|pi|return|switch|try|while)\b/,
  	'function': /(?!\d)\w+(?=\s*\()/,
  	'operator': /\.?[*^\/\\']|[+\-:@]|[<>=~]=?|&&?|\|\|?/,
  	'punctuation': /\.{3}|[.,;\[\](){}!]/
  };

  const objectivec = Object.assign({}, c, {
  	'keyword': /\b(?:asm|typeof|inline|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|union|unsigned|void|volatile|while|in|self|super)\b|(?:@interface|@end|@implementation|@protocol|@class|@public|@protected|@private|@property|@try|@catch|@finally|@throw|@synthesize|@dynamic|@selector)\b/,
  	'string': /("|')(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1|@"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,
  	'operator': /-[->]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|\|?|[~^%?*\/@]/
  });

  const ocaml = {
  	'comment': /\(\*[\s\S]*?\*\)/,
  	'string': [
  		{
  			pattern: /"(?:\\.|[^\\\r\n"])*"/,
  			greedy: true
  		},
  		{
  			pattern: /(['`])(?:\\(?:\d+|x[\da-f]+|.)|(?!\1)[^\\\r\n])\1/i,
  			greedy: true
  		}
  	],
  	'number': /\b-?(?:0x[\da-f][\da-f_]+|(?:0[bo])?\d[\d_]*\.?[\d_]*(?:e[+-]?[\d_]+)?)/i,
  	'type': {
  		pattern: /\B['`]\w*/,
  		alias: 'variable'
  	},
  	'directive': {
  		pattern: /\B#\w+/,
  		alias: 'function'
  	},
  	'keyword': /\b(?:as|assert|begin|class|constraint|do|done|downto|else|end|exception|external|for|fun|function|functor|if|in|include|inherit|initializer|lazy|let|match|method|module|mutable|new|object|of|open|prefix|private|rec|then|sig|struct|to|try|type|val|value|virtual|where|while|with)\b/,
  	'boolean': /\b(?:false|true)\b/,
  	// Custom operators are allowed
  	'operator': /:=|[=<>@^|&+\-*\/$%!?~][!$%&*+\-.\/:<=>?@^|~]*|\b(?:and|asr|land|lor|lxor|lsl|lsr|mod|nor|or)\b/,
  	'punctuation': /[(){}\[\]|_.,:;]/
  };

  const pascal = {
  	'comment': [
  		/\(\*[\s\S]+?\*\)/,
  		/\{[\s\S]+?\}/,
  		/\/\/.*/
  	],
  	'string': {
  		pattern: /(?:'(?:''|[^'\r\n])*'|#[&$%]?[a-f\d]+)+|\^[a-z]/i,
  		greedy: true
  	},
  	'keyword': [
  		{
  			// Turbo Pascal
  			pattern: /(^|[^&])\b(?:absolute|array|asm|begin|case|const|constructor|destructor|do|downto|else|end|file|for|function|goto|if|implementation|inherited|inline|interface|label|nil|object|of|operator|packed|procedure|program|record|reintroduce|repeat|self|set|string|then|to|type|unit|until|uses|var|while|with)\b/i,
  			lookbehind: true
  		},
  		{
  			// Free Pascal
  			pattern: /(^|[^&])\b(?:dispose|exit|false|new|true)\b/i,
  			lookbehind: true
  		},
  		{
  			// Object Pascal
  			pattern: /(^|[^&])\b(?:class|dispinterface|except|exports|finalization|finally|initialization|inline|library|on|out|packed|property|raise|resourcestring|threadvar|try)\b/i,
  			lookbehind: true
  		},
  		{
  			// Modifiers
  			pattern: /(^|[^&])\b(?:absolute|abstract|alias|assembler|bitpacked|break|cdecl|continue|cppdecl|cvar|default|deprecated|dynamic|enumerator|experimental|export|external|far|far16|forward|generic|helper|implements|index|interrupt|iochecks|local|message|name|near|nodefault|noreturn|nostackframe|oldfpccall|otherwise|overload|override|pascal|platform|private|protected|public|published|read|register|reintroduce|result|safecall|saveregisters|softfloat|specialize|static|stdcall|stored|strict|unaligned|unimplemented|varargs|virtual|write)\b/i,
  			lookbehind: true
  		}
  	],
  	'number': [
  		// Hexadecimal, octal and binary
  		/[+-]?(?:[&%]\d+|\$[a-f\d]+)/i,
  		// Decimal
  		/([+-]|\b)\d+(?:\.\d+)?(?:e[+-]?\d+)?/i
  	],
  	'operator': [
  		/\.\.|\*\*|:=|<[<=>]?|>[>=]?|[+\-*\/]=?|[@^=]/i,
  		{
  			pattern: /(^|[^&])\b(?:and|as|div|exclude|in|include|is|mod|not|or|shl|shr|xor)\b/,
  			lookbehind: true
  		}
  	],
  	'punctuation': /\(\.|\.\)|[()\[\]:;,.]/
  };

  const perl = {
  	'comment': [
  		{
  			// POD
  			pattern: /(^\s*)=\w+[\s\S]*?=cut.*/m,
  			lookbehind: true
  		},
  		{
  			pattern: /(^|[^\\$])#.*/,
  			lookbehind: true
  		}
  	],
  	// TODO Could be nice to handle Heredoc too.
  	'string': [
  		// q/.../
  		{
  			pattern: /\b(?:q|qq|qx|qw)\s*([^a-zA-Z0-9\s{(\[<])(?:(?!\1)[^\\]|\\[\s\S])*\1/,
  			greedy: true
  		},

  		// q a...a
  		{
  			pattern: /\b(?:q|qq|qx|qw)\s+([a-zA-Z0-9])(?:(?!\1)[^\\]|\\[\s\S])*\1/,
  			greedy: true
  		},

  		// q(...)
  		{
  			pattern: /\b(?:q|qq|qx|qw)\s*\((?:[^()\\]|\\[\s\S])*\)/,
  			greedy: true
  		},

  		// q{...}
  		{
  			pattern: /\b(?:q|qq|qx|qw)\s*\{(?:[^{}\\]|\\[\s\S])*\}/,
  			greedy: true
  		},

  		// q[...]
  		{
  			pattern: /\b(?:q|qq|qx|qw)\s*\[(?:[^[\]\\]|\\[\s\S])*\]/,
  			greedy: true
  		},

  		// q<...>
  		{
  			pattern: /\b(?:q|qq|qx|qw)\s*<(?:[^<>\\]|\\[\s\S])*>/,
  			greedy: true
  		},

  		// "...", `...`
  		{
  			pattern: /("|`)(?:(?!\1)[^\\]|\\[\s\S])*\1/,
  			greedy: true
  		},

  		// '...'
  		// FIXME Multi-line single-quoted strings are not supported as they would break variables containing '
  		{
  			pattern: /'(?:[^'\\\r\n]|\\.)*'/,
  			greedy: true
  		}
  	],
  	'regex': [
  		// m/.../
  		{
  			pattern: /\b(?:m|qr)\s*([^a-zA-Z0-9\s{(\[<])(?:(?!\1)[^\\]|\\[\s\S])*\1[msixpodualngc]*/,
  			greedy: true
  		},

  		// m a...a
  		{
  			pattern: /\b(?:m|qr)\s+([a-zA-Z0-9])(?:(?!\1)[^\\]|\\[\s\S])*\1[msixpodualngc]*/,
  			greedy: true
  		},

  		// m(...)
  		{
  			pattern: /\b(?:m|qr)\s*\((?:[^()\\]|\\[\s\S])*\)[msixpodualngc]*/,
  			greedy: true
  		},

  		// m{...}
  		{
  			pattern: /\b(?:m|qr)\s*\{(?:[^{}\\]|\\[\s\S])*\}[msixpodualngc]*/,
  			greedy: true
  		},

  		// m[...]
  		{
  			pattern: /\b(?:m|qr)\s*\[(?:[^[\]\\]|\\[\s\S])*\][msixpodualngc]*/,
  			greedy: true
  		},

  		// m<...>
  		{
  			pattern: /\b(?:m|qr)\s*<(?:[^<>\\]|\\[\s\S])*>[msixpodualngc]*/,
  			greedy: true
  		},

  		// The lookbehinds prevent -s from breaking
  		// FIXME We don't handle change of separator like s(...)[...]
  		// s/.../.../
  		{
  			pattern: /(^|[^-]\b)(?:s|tr|y)\s*([^a-zA-Z0-9\s{(\[<])(?:(?!\2)[^\\]|\\[\s\S])*\2(?:(?!\2)[^\\]|\\[\s\S])*\2[msixpodualngcer]*/,
  			lookbehind: true,
  			greedy: true
  		},

  		// s a...a...a
  		{
  			pattern: /(^|[^-]\b)(?:s|tr|y)\s+([a-zA-Z0-9])(?:(?!\2)[^\\]|\\[\s\S])*\2(?:(?!\2)[^\\]|\\[\s\S])*\2[msixpodualngcer]*/,
  			lookbehind: true,
  			greedy: true
  		},

  		// s(...)(...)
  		{
  			pattern: /(^|[^-]\b)(?:s|tr|y)\s*\((?:[^()\\]|\\[\s\S])*\)\s*\((?:[^()\\]|\\[\s\S])*\)[msixpodualngcer]*/,
  			lookbehind: true,
  			greedy: true
  		},

  		// s{...}{...}
  		{
  			pattern: /(^|[^-]\b)(?:s|tr|y)\s*\{(?:[^{}\\]|\\[\s\S])*\}\s*\{(?:[^{}\\]|\\[\s\S])*\}[msixpodualngcer]*/,
  			lookbehind: true,
  			greedy: true
  		},

  		// s[...][...]
  		{
  			pattern: /(^|[^-]\b)(?:s|tr|y)\s*\[(?:[^[\]\\]|\\[\s\S])*\]\s*\[(?:[^[\]\\]|\\[\s\S])*\][msixpodualngcer]*/,
  			lookbehind: true,
  			greedy: true
  		},

  		// s<...><...>
  		{
  			pattern: /(^|[^-]\b)(?:s|tr|y)\s*<(?:[^<>\\]|\\[\s\S])*>\s*<(?:[^<>\\]|\\[\s\S])*>[msixpodualngcer]*/,
  			lookbehind: true,
  			greedy: true
  		},

  		// /.../
  		// The look-ahead tries to prevent two divisions on
  		// the same line from being highlighted as regex.
  		// This does not support multi-line regex.
  		{
  			pattern: /\/(?:[^\/\\\r\n]|\\.)*\/[msixpodualngc]*(?=\s*(?:$|[\r\n,.;})&|\-+*~<>!?^]|(lt|gt|le|ge|eq|ne|cmp|not|and|or|xor|x)\b))/,
  			greedy: true
  		}
  	],

  	// FIXME Not sure about the handling of ::, ', and #
  	'variable': [
  		// ${^POSTMATCH}
  		/[&*$@%]\{\^[A-Z]+\}/,
  		// $^V
  		/[&*$@%]\^[A-Z_]/,
  		// ${...}
  		/[&*$@%]#?(?=\{)/,
  		// $foo
  		/[&*$@%]#?(?:(?:::)*'?(?!\d)[\w$]+)+(?:::)*/i,
  		// $1
  		/[&*$@%]\d+/,
  		// $_, @_, %!
  		// The negative lookahead prevents from breaking the %= operator
  		/(?!%=)[$@%][!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~]/
  	],
  	'filehandle': {
  		// <>, <FOO>, _
  		pattern: /<(?![<=])\S*>|\b_\b/,
  		alias: 'symbol'
  	},
  	'vstring': {
  		// v1.2, 1.2.3
  		pattern: /v\d+(?:\.\d+)*|\d+(?:\.\d+){2,}/,
  		alias: 'string'
  	},
  	'function': {
  		pattern: /sub [a-z0-9_]+/i,
  		inside: {
  			keyword: /sub/
  		}
  	},
  	'keyword': /\b(?:any|break|continue|default|delete|die|do|else|elsif|eval|for|foreach|given|goto|if|last|local|my|next|our|package|print|redo|require|say|state|sub|switch|undef|unless|until|use|when|while)\b/,
  	'number': /\b-?(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0b[01](?:_?[01])*|(?:\d(?:_?\d)*)?\.?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)\b/,
  	'operator': /-[rwxoRWXOezsfdlpSbctugkTBMAC]\b|\+[+=]?|-[-=>]?|\*\*?=?|\/\/?=?|=[=~>]?|~[~=]?|\|\|?=?|&&?=?|<(?:=>?|<=?)?|>>?=?|![~=]?|[%^]=?|\.(?:=|\.\.?)?|[\\?]|\bx(?:=|\b)|\b(?:lt|gt|le|ge|eq|ne|cmp|not|and|or|xor)\b/,
  	'punctuation': /[{}[\];(),:]/
  };

  const php = Object.assign({}, basic, clike, {
  	'string': {
  		pattern: /(["'])(?:\\[\s\S]|(?!\1)[^\\])*\1/,
  		greedy: true
  	},
  	'keyword': /\b(?:and|or|xor|array|as|break|case|cfunction|class|const|continue|declare|default|die|do|else|elseif|enddeclare|endfor|endforeach|endif|endswitch|endwhile|extends|for|foreach|function|include|include_once|global|if|new|return|static|switch|use|require|require_once|var|while|abstract|interface|public|implements|private|protected|parent|throw|null|echo|print|trait|namespace|final|yield|goto|instanceof|finally|try|catch)\b/i,
  	'constant': /\b[A-Z0-9_]{2,}\b/,
    'variable': /\$\w+\b/i,
  	'package': {
  		pattern: /(\\|namespace\s+|use\s+)[\w\\]+/,
  		lookbehind: true,
  		inside: {
  			punctuation: /\\/
  		}
  	},
  	'comment': {
  		pattern: /(^|[^\\])(?:\/\*[\s\S]*?\*\/|\/\/.*)/,
  		lookbehind: true
  	}
  });

  const powershell = {
  	'comment': [
  		{
  			pattern: /(^|[^`])<#[\s\S]*?#>/,
  			lookbehind: true
  		},
  		{
  			pattern: /(^|[^`])#.*/,
  			lookbehind: true
  		}
  	],
  	'string': [
  		{
  			pattern: /"(?:`[\s\S]|[^`"])*"/,
  			greedy: true
  		},
  		{
  			pattern: /'(?:[^']|'')*'/,
  			greedy: true
  		}
  	],
  	// Matches name spaces as well as casts, attribute decorators. Force starting with letter to avoid matching array indices
  	'namespace': /\[[a-z][\s\S]*?\]/i,
  	'boolean': /\$(?:true|false)\b/i,
  	'variable': /\$\w+\b/i,
  	// Cmdlets and aliases. Aliases should come last, otherwise "write" gets preferred over "write-host" for example
  	// Get-Command | ?{ $_.ModuleName -match "Microsoft.PowerShell.(Util|Core|Management)" }
  	// Get-Alias | ?{ $_.ReferencedCommand.Module.Name -match "Microsoft.PowerShell.(Util|Core|Management)" }
  	'function': [
  		/\b(?:Add-(?:Computer|Content|History|Member|PSSnapin|Type)|Checkpoint-Computer|Clear-(?:Content|EventLog|History|Item|ItemProperty|Variable)|Compare-Object|Complete-Transaction|Connect-PSSession|ConvertFrom-(?:Csv|Json|StringData)|Convert-Path|ConvertTo-(?:Csv|Html|Json|Xml)|Copy-(?:Item|ItemProperty)|Debug-Process|Disable-(?:ComputerRestore|PSBreakpoint|PSRemoting|PSSessionConfiguration)|Disconnect-PSSession|Enable-(?:ComputerRestore|PSBreakpoint|PSRemoting|PSSessionConfiguration)|Enter-PSSession|Exit-PSSession|Export-(?:Alias|Clixml|Console|Csv|FormatData|ModuleMember|PSSession)|ForEach-Object|Format-(?:Custom|List|Table|Wide)|Get-(?:Alias|ChildItem|Command|ComputerRestorePoint|Content|ControlPanelItem|Culture|Date|Event|EventLog|EventSubscriber|FormatData|Help|History|Host|HotFix|Item|ItemProperty|Job|Location|Member|Module|Process|PSBreakpoint|PSCallStack|PSDrive|PSProvider|PSSession|PSSessionConfiguration|PSSnapin|Random|Service|TraceSource|Transaction|TypeData|UICulture|Unique|Variable|WmiObject)|Group-Object|Import-(?:Alias|Clixml|Csv|LocalizedData|Module|PSSession)|Invoke-(?:Command|Expression|History|Item|RestMethod|WebRequest|WmiMethod)|Join-Path|Limit-EventLog|Measure-(?:Command|Object)|Move-(?:Item|ItemProperty)|New-(?:Alias|Event|EventLog|Item|ItemProperty|Module|ModuleManifest|Object|PSDrive|PSSession|PSSessionConfigurationFile|PSSessionOption|PSTransportOption|Service|TimeSpan|Variable|WebServiceProxy)|Out-(?:Default|File|GridView|Host|Null|Printer|String)|Pop-Location|Push-Location|Read-Host|Receive-(?:Job|PSSession)|Register-(?:EngineEvent|ObjectEvent|PSSessionConfiguration|WmiEvent)|Remove-(?:Computer|Event|EventLog|Item|ItemProperty|Job|Module|PSBreakpoint|PSDrive|PSSession|PSSnapin|TypeData|Variable|WmiObject)|Rename-(?:Computer|Item|ItemProperty)|Reset-ComputerMachinePassword|Resolve-Path|Restart-(?:Computer|Service)|Restore-Computer|Resume-(?:Job|Service)|Save-Help|Select-(?:Object|String|Xml)|Send-MailMessage|Set-(?:Alias|Content|Date|Item|ItemProperty|Location|PSBreakpoint|PSDebug|PSSessionConfiguration|Service|StrictMode|TraceSource|Variable|WmiInstance)|Show-(?:Command|ControlPanelItem|EventLog)|Sort-Object|Split-Path|Start-(?:Job|Process|Service|Sleep|Transaction)|Stop-(?:Computer|Job|Process|Service)|Suspend-(?:Job|Service)|Tee-Object|Test-(?:ComputerSecureChannel|Connection|ModuleManifest|Path|PSSessionConfigurationFile)|Trace-Command|Unblock-File|Undo-Transaction|Unregister-(?:Event|PSSessionConfiguration)|Update-(?:FormatData|Help|List|TypeData)|Use-Transaction|Wait-(?:Event|Job|Process)|Where-Object|Write-(?:Debug|Error|EventLog|Host|Output|Progress|Verbose|Warning))\b/i,
  		/\b(?:ac|cat|chdir|clc|cli|clp|clv|compare|copy|cp|cpi|cpp|cvpa|dbp|del|diff|dir|ebp|echo|epal|epcsv|epsn|erase|fc|fl|ft|fw|gal|gbp|gc|gci|gcs|gdr|gi|gl|gm|gp|gps|group|gsv|gu|gv|gwmi|iex|ii|ipal|ipcsv|ipsn|irm|iwmi|iwr|kill|lp|ls|measure|mi|mount|move|mp|mv|nal|ndr|ni|nv|ogv|popd|ps|pushd|pwd|rbp|rd|rdr|ren|ri|rm|rmdir|rni|rnp|rp|rv|rvpa|rwmi|sal|saps|sasv|sbp|sc|select|set|shcm|si|sl|sleep|sls|sort|sp|spps|spsv|start|sv|swmi|tee|trcm|type|write)\b/i
  	],
  	// per http://technet.microsoft.com/en-us/library/hh847744.aspx
  	'keyword': /\b(?:Begin|Break|Catch|Class|Continue|Data|Define|Do|DynamicParam|Else|ElseIf|End|Exit|Filter|Finally|For|ForEach|From|Function|If|InlineScript|Parallel|Param|Process|Return|Sequence|Switch|Throw|Trap|Try|Until|Using|Var|While|Workflow)\b/i,
  	'operator': {
  		pattern: /(\W?)(?:!|-(eq|ne|gt|ge|lt|le|sh[lr]|not|b?(?:and|x?or)|(?:Not)?(?:Like|Match|Contains|In)|Replace|Join|is(?:Not)?|as)\b|-[-=]?|\+[+=]?|[*\/%]=?)/i,
  		lookbehind: true
  	},
  	'punctuation': /[|{}[\];(),.]/
  };

  const prolog = {
  	// Syntax depends on the implementation
  	'comment': [
  		/%.+/,
  		/\/\*[\s\S]*?\*\//
  	],
  	// Depending on the implementation, strings may allow escaped newlines and quote-escape
  	'string': {
  		pattern: /(["'])(?:\1\1|\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,
  		greedy: true
  	},
  	'builtin': /\b(?:fx|fy|xf[xy]?|yfx?)\b/,
  	'variable': /\b[A-Z_]\w*/,
  	// FIXME: Should we list all null-ary predicates (not followed by a parenthesis) like halt, trace, etc.?
  	'function': /\b[a-z]\w*(?:(?=\()|\/\d+)/,
  	'number': /\b\d+\.?\d*/,
  	// Custom operators are allowed
  	'operator': /[:\\=><\-?*@\/;+^|!$.]+|\b(?:is|mod|not|xor)\b/,
  	'punctuation': /[(){}\[\],]/
  };

  const properties = {
  	'comment': /^[ \t]*[#!].*$/m,
  	'attr-value': {
  		pattern: /(^[ \t]*(?:\\(?:\r\n|[\s\S])|[^\\\s:=])+?(?: *[=:] *| ))(?:\\(?:\r\n|[\s\S])|[^\\\r\n])+/m,
  		lookbehind: true
  	},
  	'attr-name': /^[ \t]*(?:\\(?:\r\n|[\s\S])|[^\\\s:=])+?(?= *[=:] *| )/m,
  	'punctuation': /[=:]/
  };

  const protobuf = Object.assign({}, basic, clike, {
  	keyword: /\b(?:package|import|message|enum)\b/,
  	builtin: /\b(?:required|repeated|optional|reserved)\b/,
  	primitive: {
  		pattern: /\b(?:double|float|int32|int64|uint32|uint64|sint32|sint64|fixed32|fixed64|sfixed32|sfixed64|bool|string|bytes)\b/,
  		alias: 'symbol'
  	}
  });

  const python = {
    'triple-quoted-string': {
      pattern: /"""[\s\S]+?"""|'''[\s\S]+?'''/,
      alias: 'string'
    },
    'comment': {
      pattern: /(^|[^\\])#.*/,
      lookbehind: true
    },
    'string': {
      pattern: /("|')(?:\\\\|\\?[^\\\r\n])*?\1/,
      greedy: true
    },
    'function' : {
      pattern: /((?:^|\s)def[ \t]+)[a-zA-Z_][a-zA-Z0-9_]*(?=\()/g,
      lookbehind: true
    },
    'class-name': {
      pattern: /(\bclass\s+)[a-z0-9_]+/i,
      lookbehind: true
    },
    'keyword' : /\b(?:as|assert|async|await|break|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|pass|print|raise|return|try|while|with|yield)\b/,
    'boolean' : /\b(?:True|False)\b/,
    'number' : /\b-?(?:0[bo])?(?:(?:\d|0x[\da-f])[\da-f]*\.?\d*|\.\d+)(?:e[+-]?\d+)?j?\b/i,
    'operator' : /[-+%=]=?|!=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]|\b(?:or|and|not)\b/,
    'punctuation' : /[{}[\];(),.:]/
  };

  const r = {
  	'comment': /#.*/,
  	'string': {
  		pattern: /(['"])(?:\\.|(?!\1)[^\\\r\n])*\1/,
  		greedy: true
  	},
  	'percent-operator': {
  		// Includes user-defined operators
  		// and %%, %*%, %/%, %in%, %o%, %x%
  		pattern: /%[^%\s]*%/,
  		alias: 'operator'
  	},
  	'boolean': /\b(?:TRUE|FALSE)\b/,
  	'ellipsis': /\.\.(?:\.|\d+)/,
  	'number': [
  		/\b(?:NaN|Inf)\b/,
  		/\b(?:0x[\dA-Fa-f]+(?:\.\d*)?|\d*\.?\d+)(?:[EePp][+-]?\d+)?[iL]?\b/
  	],
  	'keyword': /\b(?:if|else|repeat|while|function|for|in|next|break|NULL|NA|NA_integer_|NA_real_|NA_complex_|NA_character_)\b/,
  	'operator': /->?>?|<(?:=|<?-)?|[>=!]=?|::?|&&?|\|\|?|[+*\/^$@~]/,
  	'punctuation': /[(){}\[\],;]/
  };

  const ruby = Object.assign({}, basic, clike, {
    'builtin': /\b(?:Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Stat|Fixnum|Float|Hash|Integer|IO|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|String|Struct|TMS|Symbol|ThreadGroup|Thread|Time|TrueClass)\b/,
		'constant': /\b[A-Z]\w*(?:[?!]|\b)/,
		'comment': [
			/#(?!\{[^\r\n]*?\}).*/,
			/^=begin(?:\r?\n|\r)(?:.*(?:\r?\n|\r))*?=end/m
		],
		'keyword': /\b(?:alias|and|BEGIN|begin|break|case|class|def|define_method|defined|do|each|else|elsif|END|end|ensure|false|for|if|in|module|new|next|nil|not|or|raise|redo|require|rescue|retry|return|self|super|then|throw|true|undef|unless|until|when|while|yield)\b/
	});

  const rust = {
  	'comment': [
  		{
  			pattern: /(^|[^\\])\/\*[\s\S]*?\*\//,
  			lookbehind: true
  		},
  		{
  			pattern: /(^|[^\\:])\/\/.*/,
  			lookbehind: true
  		}
  	],
  	'string': [
  		{
  			pattern: /b?r(#*)"(?:\\.|(?!"\1)[^\\\r\n])*"\1/,
  			greedy: true
  		},
  		{
  			pattern: /b?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/,
  			greedy: true
  		}
  	],
  	'keyword': /\b(?:abstract|alignof|as|be|box|break|const|continue|crate|do|else|enum|extern|false|final|fn|for|if|impl|in|let|loop|match|mod|move|mut|offsetof|once|override|priv|pub|pure|ref|return|sizeof|static|self|struct|super|true|trait|type|typeof|unsafe|unsized|use|virtual|where|while|yield)\b/,

  	'attribute': {
  		pattern: /#!?\[.+?\]/,
  		greedy: true,
  		alias: 'attr-name'
  	},

  	'function': [
  		/\w+(?=\s*\()/,
  		// Macros can use parens or brackets
  		/\w+!(?=\s*\(|\[)/
  	],
  	'macro-rules': {
  		pattern: /\w+!/,
  		alias: 'function'
  	},

  	// Hex, oct, bin, dec numbers with visual separators and type suffix
  	'number': /\b-?(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(\d(?:_?\d)*)?\.?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:[iu](?:8|16|32|64)?|f32|f64))?\b/,

  	'punctuation': /[{}[\];(),:]|\.+|->/,
  	'operator': /[-+*\/%!^=]=?|@|&[&=]?|\|[|=]?|<<?=?|>>?=?/
  };

  const scss = Object.assign({}, css, {
  	'comment': {
  		pattern: /(^|[^\\])(?:\/\*[\s\S]*?\*\/|\/\/.*)/,
  		lookbehind: true
  	},
  	'atrule': {
  		pattern: /@[\w-]+(?:\([^()]+\)|[^(])*?(?=\s+[{;])/,
  		inside: {
  			'rule': /@[\w-]+/
  			// See rest below
  		}
  	},
  	// url, compassified
  	'url': /(?:[-a-z]+-)*url(?=\()/i
  });

  const smalltalk = {
  	'comment': /"(?:""|[^"])+"/,
  	'string': /'(?:''|[^'])+'/,
  	'symbol': /#[\da-z]+|#(?:-|([+\/\\*~<>=@%|&?!])\1?)|#(?=\()/i,
  	'block-arguments': {
  		pattern: /(\[\s*):[^\[|]*\|/,
  		lookbehind: true,
  		inside: {
  			'variable': /:[\da-z]+/i,
  			'punctuation': /\|/
  		}
  	},
  	'temporary-variables': {
  		pattern: /\|[^|]+\|/,
  		inside: {
  			'variable': /[\da-z]+/i,
  			'punctuation': /\|/
  		}
  	},
  	'keyword': /\b(?:nil|true|false|self|super|new)\b/,
  	'character': {
  		pattern: /\$./,
  		alias: 'string'
  	},
  	'number': [
  		/\d+r-?[\dA-Z]+(?:\.[\dA-Z]+)?(?:e-?\d+)?/,
  		/(?:\B-|\b)\d+(?:\.\d+)?(?:e-?\d+)?/
  	],
  	'operator': /[<=]=?|:=|~[~=]|\/\/?|\\\\|>[>=]?|[!^+\-*&|,@]/,
  	'punctuation': /[.;:?\[\](){}]/
  };

  const sql = {
  	'comment': {
  		pattern: /(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,
  		lookbehind: true
  	},
  	'string' : {
  		pattern: /(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\])*\2/,
  		greedy: true,
  		lookbehind: true
  	},
  	'variable': /@[\w.$]+|@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,
  	'function': /\b(?:COUNT|SUM|AVG|MIN|MAX|FIRST|LAST|UCASE|LCASE|MID|LEN|ROUND|NOW|FORMAT)(?=\s*\()/i,
  	'keyword': /\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR VARYING|CHARACTER (?:SET|VARYING)|CHARSET|CHECK|CHECKPOINT|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMN|COLUMNS|COMMENT|COMMIT|COMMITTED|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS|CONTAINSTABLE|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|DATA(?:BASES?)?|DATE(?:TIME)?|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITER(?:S)?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE(?: PRECISION)?|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE KEY|ELSE|ENABLE|ENCLOSED BY|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPE(?:D BY)?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|IDENTITY(?:_INSERT|COL)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTO|INVOKER|ISOLATION LEVEL|JOIN|KEYS?|KILL|LANGUAGE SQL|LAST|LEFT|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MODIFIES SQL DATA|MODIFY|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL(?: CHAR VARYING| CHARACTER(?: VARYING)?| VARCHAR)?|NATURAL|NCHAR(?: VARCHAR)?|NEXT|NO(?: SQL|CHECK|CYCLE)?|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READ(?:S SQL DATA|TEXT)?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEATABLE|REPLICATION|REQUIRE|RESTORE|RESTRICT|RETURNS?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE MODE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|START(?:ING BY)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED BY|TEXT(?:SIZE)?|THEN|TIMESTAMP|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNPIVOT|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?)\b/i,
  	'boolean': /\b(?:TRUE|FALSE|NULL)\b/i,
  	'number': /\b-?(?:0x)?\d*\.?[\da-f]+\b/,
  	'operator': /[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|IN|LIKE|NOT|OR|IS|DIV|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,
  	'punctuation': /[;[\]()`,.]/
  };

  const swift = Object.assign({}, basic, clike, {
  	'string': {
  		pattern: /("|')(\\(?:\((?:[^()]|\([^)]+\))+\)|\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,
  		greedy: true,
  		inside: {
  			'interpolation': {
  				pattern: /\\\((?:[^()]|\([^)]+\))+\)/,
  				inside: {
  					delimiter: {
  						pattern: /^\\\(|\)$/,
  						alias: 'variable'
  					}
  					// See rest below
  				}
  			}
  		}
  	},
  	'keyword': /\b(?:as|associativity|break|case|catch|class|continue|convenience|default|defer|deinit|didSet|do|dynamic(?:Type)?|else|enum|extension|fallthrough|final|for|func|get|guard|if|import|in|infix|init|inout|internal|is|lazy|left|let|mutating|new|none|nonmutating|operator|optional|override|postfix|precedence|prefix|private|Protocol|public|repeat|required|rethrows|return|right|safe|self|Self|set|static|struct|subscript|super|switch|throws?|try|Type|typealias|unowned|unsafe|var|weak|where|while|willSet|__(?:COLUMN__|FILE__|FUNCTION__|LINE__))\b/,
  	'number': /\b(?:[\d_]+(?:\.[\de_]+)?|0x[a-f0-9_]+(?:\.[a-f0-9p_]+)?|0b[01_]+|0o[0-7_]+)\b/i,
  	'constant': /\b(?:nil|[A-Z_]{2,}|k[A-Z][A-Za-z_]+)\b/,
  	'atrule': /@\b(?:IB(?:Outlet|Designable|Action|Inspectable)|class_protocol|exported|noreturn|NS(?:Copying|Managed)|objc|UIApplicationMain|auto_closure)\b/,
  	'builtin': /\b(?:[A-Z]\S+|abs|advance|alignof(?:Value)?|assert|contains|count(?:Elements)?|debugPrint(?:ln)?|distance|drop(?:First|Last)|dump|enumerate|equal|filter|find|first|getVaList|indices|isEmpty|join|last|lexicographicalCompare|map|max(?:Element)?|min(?:Element)?|numericCast|overlaps|partition|print(?:ln)?|reduce|reflect|reverse|sizeof(?:Value)?|sort(?:ed)?|split|startsWith|stride(?:of(?:Value)?)?|suffix|swap|toDebugString|toString|transcode|underestimateCount|unsafeBitCast|with(?:ExtendedLifetime|Unsafe(?:MutablePointers?|Pointers?)|VaList))\b/
  });

  const typescript = Object.assign({}, javascript, {
  	'keyword': /\b(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|var|void|while|with|yield|false|true|module|declare|constructor|string|Function|any|number|boolean|Array|symbol|namespace|abstract|require|type)\b/
  });

  const vbnet = Object.assign({}, basic, {
  	'keyword': /(?:\b(?:ADDHANDLER|ADDRESSOF|ALIAS|AND|ANDALSO|AS|BEEP|BLOAD|BOOLEAN|BSAVE|BYREF|BYTE|BYVAL|CALL(?: ABSOLUTE)?|CASE|CATCH|CBOOL|CBYTE|CCHAR|CDATE|CDEC|CDBL|CHAIN|CHAR|CHDIR|CINT|CLASS|CLEAR|CLNG|CLOSE|CLS|COBJ|COM|COMMON|CONST|CONTINUE|CSBYTE|CSHORT|CSNG|CSTR|CTYPE|CUINT|CULNG|CUSHORT|DATA|DATE|DECIMAL|DECLARE|DEFAULT|DEF(?: FN| SEG|DBL|INT|LNG|SNG|STR)|DELEGATE|DIM|DIRECTCAST|DO|DOUBLE|ELSE|ELSEIF|END|ENUM|ENVIRON|ERASE|ERROR|EVENT|EXIT|FALSE|FIELD|FILES|FINALLY|FOR(?: EACH)?|FRIEND|FUNCTION|GET|GETTYPE|GETXMLNAMESPACE|GLOBAL|GOSUB|GOTO|HANDLES|IF|IMPLEMENTS|IMPORTS|IN|INHERITS|INPUT|INTEGER|INTERFACE|IOCTL|IS|ISNOT|KEY|KILL|LINE INPUT|LET|LIB|LIKE|LOCATE|LOCK|LONG|LOOP|LSET|ME|MKDIR|MOD|MODULE|MUSTINHERIT|MUSTOVERRIDE|MYBASE|MYCLASS|NAME|NAMESPACE|NARROWING|NEW|NEXT|NOT|NOTHING|NOTINHERITABLE|NOTOVERRIDABLE|OBJECT|OF|OFF|ON(?: COM| ERROR| KEY| TIMER)?|OPERATOR|OPEN|OPTION(?: BASE)?|OPTIONAL|OR|ORELSE|OUT|OVERLOADS|OVERRIDABLE|OVERRIDES|PARAMARRAY|PARTIAL|POKE|PRIVATE|PROPERTY|PROTECTED|PUBLIC|PUT|RAISEEVENT|READ|READONLY|REDIM|REM|REMOVEHANDLER|RESTORE|RESUME|RETURN|RMDIR|RSET|RUN|SBYTE|SELECT(?: CASE)?|SET|SHADOWS|SHARED|SHORT|SINGLE|SHELL|SLEEP|STATIC|STEP|STOP|STRING|STRUCTURE|SUB|SYNCLOCK|SWAP|SYSTEM|THEN|THROW|TIMER|TO|TROFF|TRON|TRUE|TRY|TRYCAST|TYPE|TYPEOF|UINTEGER|ULONG|UNLOCK|UNTIL|USHORT|USING|VIEW PRINT|WAIT|WEND|WHEN|WHILE|WIDENING|WITH|WITHEVENTS|WRITE|WRITEONLY|XOR)|\B(?:#CONST|#ELSE|#ELSEIF|#END|#IF))(?:\$|\b)/i,
  	'comment': [
  		{
  			pattern: /(?:!|REM\b).+/i,
  			inside: {
  				'keyword': /^REM/i
  			}
  		},
  		{
  			pattern: /(^|[^\\:])'.*/,
  			lookbehind: true
  		}
  	]
  });

  const yaml = {
  	'scalar': {
  		pattern: /([\-:]\s*(?:![^\s]+)?[ \t]*[|>])[ \t]*(?:((?:\r?\n|\r)[ \t]+)[^\r\n]+(?:\2[^\r\n]+)*)/,
  		lookbehind: true,
  		alias: 'string'
  	},
  	'comment': /#.*/,
  	'key': {
  		pattern: /(\s*(?:^|[:\-,[{\r\n?])[ \t]*(?:![^\s]+)?[ \t]*)[^\r\n{[\]},#\s]+?(?=\s*:\s)/,
  		lookbehind: true,
  		alias: 'atrule'
  	},
  	'directive': {
  		pattern: /(^[ \t]*)%.+/m,
  		lookbehind: true,
  		alias: 'important'
  	},
  	'datetime': {
  		pattern: /([:\-,[{]\s*(?:![^\s]+)?[ \t]*)(?:\d{4}-\d\d?-\d\d?(?:[tT]|[ \t]+)\d\d?:\d{2}:\d{2}(?:\.\d*)?[ \t]*(?:Z|[-+]\d\d?(?::\d{2})?)?|\d{4}-\d{2}-\d{2}|\d\d?:\d{2}(?::\d{2}(?:\.\d*)?)?)(?=[ \t]*(?:$|,|]|}))/m,
  		lookbehind: true,
  		alias: 'number'
  	},
  	'boolean': {
  		pattern: /([:\-,[{]\s*(?:![^\s]+)?[ \t]*)(?:true|false)[ \t]*(?=$|,|]|})/im,
  		lookbehind: true,
  		alias: 'important'
  	},
  	'null': {
  		pattern: /([:\-,[{]\s*(?:![^\s]+)?[ \t]*)(?:null|~)[ \t]*(?=$|,|]|})/im,
  		lookbehind: true,
  		alias: 'important'
  	},
  	'string': {
  		pattern: /([:\-,[{]\s*(?:![^\s]+)?[ \t]*)("|')(?:(?!\2)[^\\\r\n]|\\.)*\2(?=[ \t]*(?:$|,|]|}))/m,
  		lookbehind: true,
  		greedy: true
  	},
  	'number': {
  		pattern: /([:\-,[{]\s*(?:![^\s]+)?[ \t]*)[+\-]?(?:0x[\da-f]+|0o[0-7]+|(?:\d+\.?\d*|\.?\d+)(?:e[+-]?\d+)?|\.inf|\.nan)[ \t]*(?=$|,|]|})/im,
  		lookbehind: true
  	},
  	'tag': /![^\s]+/,
  	'important': /[&*][\w]+/,
  	'punctuation': /---|[:[\]{}\-,|>?]|\.\.\./
  };


  // Register grammars here
  GRAMMARS.set('ada', ada);
  GRAMMARS.set('applescript', applescript);
  GRAMMARS.set('arduino', arduino);
  GRAMMARS.set('bash', bash);
  GRAMMARS.set('c', c);
  GRAMMARS.set('cpp', cpp);
  GRAMMARS.set('csharp', csharp);
  GRAMMARS.set('css', css);
  GRAMMARS.set('dart', dart);
  GRAMMARS.set('docker', docker);
  GRAMMARS.set('eiffel', eiffel);
  GRAMMARS.set('elixir', elixir);
  GRAMMARS.set('erlang', erlang);
  GRAMMARS.set('fortran', fortran);
  GRAMMARS.set('go', go);
  GRAMMARS.set('groovy', groovy);
  GRAMMARS.set('haskell', haskell);
  GRAMMARS.set('html', markup);
  GRAMMARS.set('java', java);
  GRAMMARS.set('javascript', javascript);
  GRAMMARS.set('json', json);
  GRAMMARS.set('julia', julia);
  GRAMMARS.set('kotlin', kotlin);
  GRAMMARS.set('less', less);
  GRAMMARS.set('lua', lua);
  GRAMMARS.set('makefile', makefile);
  GRAMMARS.set('matlab', matlab);
  GRAMMARS.set('objectivec', objectivec);
  GRAMMARS.set('ocaml', ocaml);
  GRAMMARS.set('pascal', pascal);
  GRAMMARS.set('perl', perl);
  GRAMMARS.set('php', php);
  GRAMMARS.set('powershell', powershell);
  GRAMMARS.set('prolog', prolog);
  GRAMMARS.set('properties', properties);
  GRAMMARS.set('protobuf', protobuf);
  GRAMMARS.set('python', python);
  GRAMMARS.set('r', r);
  GRAMMARS.set('ruby', ruby);
  GRAMMARS.set('rust', rust);
  GRAMMARS.set('scss', scss);
  GRAMMARS.set('smalltalk', smalltalk);
  GRAMMARS.set('sql', sql);
  GRAMMARS.set('swift', swift);
  GRAMMARS.set('typescript', typescript);
  GRAMMARS.set('vb', vbnet);
  GRAMMARS.set('yaml', yaml);
  GRAMMARS.set('xml', markup);
  // to complete...


  // Key are file extension. Value are language name as specified in GRAMMARS.
  LANGUAGE_PER_EXTENSIONS.set('java', 'java');
  LANGUAGE_PER_EXTENSIONS.set('c', 'c');
  LANGUAGE_PER_EXTENSIONS.set('h', 'c');
  LANGUAGE_PER_EXTENSIONS.set('py', 'python');
  LANGUAGE_PER_EXTENSIONS.set('css', 'css');
  LANGUAGE_PER_EXTENSIONS.set('less', 'less');
  LANGUAGE_PER_EXTENSIONS.set('scss', 'scss');
  LANGUAGE_PER_EXTENSIONS.set('sass', 'scss');
  LANGUAGE_PER_EXTENSIONS.set('php', 'php');
  LANGUAGE_PER_EXTENSIONS.set('rb', 'ruby');
  LANGUAGE_PER_EXTENSIONS.set('erb', 'ruby');
  LANGUAGE_PER_EXTENSIONS.set('cc', 'cpp');
  LANGUAGE_PER_EXTENSIONS.set('go', 'go');
  LANGUAGE_PER_EXTENSIONS.set('sh', 'bash');
  LANGUAGE_PER_EXTENSIONS.set('xml', 'xml');
  LANGUAGE_PER_EXTENSIONS.set('html', 'html');
  LANGUAGE_PER_EXTENSIONS.set('json', 'json');
  LANGUAGE_PER_EXTENSIONS.set('Makefile', 'makefile');
  LANGUAGE_PER_EXTENSIONS.set('proto', 'protobuf');
  LANGUAGE_PER_EXTENSIONS.set('cs', 'csharp');
  LANGUAGE_PER_EXTENSIONS.set('swift', 'swift');
  LANGUAGE_PER_EXTENSIONS.set('scala', 'scala');
  LANGUAGE_PER_EXTENSIONS.set('hs', 'haskell');
  LANGUAGE_PER_EXTENSIONS.set('lua', 'lua');
  LANGUAGE_PER_EXTENSIONS.set('clj', 'clojure');
  LANGUAGE_PER_EXTENSIONS.set('m', 'matlab');
  LANGUAGE_PER_EXTENSIONS.set('ino', 'arduino');
  LANGUAGE_PER_EXTENSIONS.set('groovy', 'groovy');
  LANGUAGE_PER_EXTENSIONS.set('erl', 'erlang');
  LANGUAGE_PER_EXTENSIONS.set('rs', 'rust');
  LANGUAGE_PER_EXTENSIONS.set('ts', 'typescript');
  LANGUAGE_PER_EXTENSIONS.set('lisp', 'lisp');
  LANGUAGE_PER_EXTENSIONS.set('jl', 'julia');
  LANGUAGE_PER_EXTENSIONS.set('ex', 'elixir');
  LANGUAGE_PER_EXTENSIONS.set('exs', 'elixir');
  LANGUAGE_PER_EXTENSIONS.set('ada', 'ada');
  LANGUAGE_PER_EXTENSIONS.set('applescript', 'applescript');
  LANGUAGE_PER_EXTENSIONS.set('dart', 'dart');
  LANGUAGE_PER_EXTENSIONS.set('Dockerfile', 'docker');
  LANGUAGE_PER_EXTENSIONS.set('e', 'eiffel');
  LANGUAGE_PER_EXTENSIONS.set('f90', 'fortran');
  LANGUAGE_PER_EXTENSIONS.set('f95', 'fortran');
  LANGUAGE_PER_EXTENSIONS.set('f03', 'fortran');
  LANGUAGE_PER_EXTENSIONS.set('f08', 'fortran');
  LANGUAGE_PER_EXTENSIONS.set('f15', 'fortran');
  LANGUAGE_PER_EXTENSIONS.set('js', 'javascript');
  LANGUAGE_PER_EXTENSIONS.set('kt', 'kotlin');
  LANGUAGE_PER_EXTENSIONS.set('ktm', 'kotlin');
  LANGUAGE_PER_EXTENSIONS.set('kts', 'kotlin');
  LANGUAGE_PER_EXTENSIONS.set('m', 'objectivec');
  LANGUAGE_PER_EXTENSIONS.set('ml', 'ocaml');
  LANGUAGE_PER_EXTENSIONS.set('pas', 'pascal');
  LANGUAGE_PER_EXTENSIONS.set('pl', 'perl');
  LANGUAGE_PER_EXTENSIONS.set('ps1', 'powershell');
  LANGUAGE_PER_EXTENSIONS.set('pro', 'prolog'); // pl too but conflict with Perl
  LANGUAGE_PER_EXTENSIONS.set('properties', 'properties');
  LANGUAGE_PER_EXTENSIONS.set('r', 'r');
  LANGUAGE_PER_EXTENSIONS.set('st', 'smalltalk');
  LANGUAGE_PER_EXTENSIONS.set('sql', 'sql');
  LANGUAGE_PER_EXTENSIONS.set('vb', 'vb');
  // To complete

}

  </script>
</dom-module>
