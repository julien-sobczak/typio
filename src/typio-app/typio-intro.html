<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">

<link rel="import" href="/src/typio-app/shared-styles.html">
<link rel="import" href="/src/typio-app/typio-button.html">

<dom-module id="typio-intro">
  <template>
    <style include="shared-styles">

      section {
        display: table;
        position: relative;
        background-color: white;
      }

      /*
       * Logo
       */

      h1 {
        position: absolute;
        text-align: center;
        font-family: var(--logo-font-family);
        width: 100%;
        top: 20vh;
      }
      h1 div {
        display: inline-block;
        position: relative;
        height: 80px;
        width: 80px;
        margin-left: 30px;
        margin-right: 30px;
      }
      h1 .letter {
        position: absolute;
        top: 0;
        left: 0;
        display: inline-block;
        height: 60px;
        width: 60px;
        border-radius: 50%;
        border: 5px solid black;
        background-color: #111;
        color: white;
        text-align: center;
        padding-top: 18px;
        z-index: 2;
      }

      h1 .wave {
        position: absolute;
        top: 5px;
        left: 5px;
        display: inline-block;
        background-color: blue;
        border-radius: 50%;
        height: 60px;
        width: 60px;
        z-index: 1;
        opacity: 0.5;
        animation: wave 1.5s ease-in;
      }

      h1 div:nth-child(1) .wave { background-color: var(--typio-letter-blue-color); animation-delay: 1.1s; }
      h1 div:nth-child(2) .wave { background-color: var(--typio-letter-yellow-color); animation-delay: 1.2s; }
      h1 div:nth-child(3) .wave { background-color: var(--typio-letter-orange-color); animation-delay: 1.3s; }
      h1 div:nth-child(4) .wave { background-color: var(--typio-letter-red-color); animation-delay: 1.4s; }
      h1 div:nth-child(5) .wave { background-color: var(--typio-letter-green-color); animation-delay: 1.5s; }

      @keyframes wave {
       0%   { top: 0px; left: 0px; height: 60px; width: 60px; }
       100% { top: -167px; left: -167px; height: 400px; width: 400px; opacity: 0; }
      }

      h1 div:nth-child(1) .letter { animation: press1 0.4s ease-out; animation-delay: 1s; }
      h1 div:nth-child(2) .letter { animation: press2 0.4s ease-out; animation-delay: 1.1s; }
      h1 div:nth-child(3) .letter { animation: press3 0.4s ease-out; animation-delay: 1.2s; }
      h1 div:nth-child(4) .letter { animation: press4 0.4s ease-out; animation-delay: 1.3s; }
      h1 div:nth-child(5) .letter { animation: press5 0.4s ease-out; animation-delay: 1.4s; }

      /* Inspired by https://codepen.io/birjolaxew/pen/EPOobx */
    
      h1 div:nth-child(1) .letter { color: var(--typio-letter-blue-color); box-shadow: 0px 0px transparent, 1px 1px var(--typio-letter-blue-color), 2px 2px var(--typio-letter-blue-color), 3px 3px var(--typio-letter-blue-color), 4px 4px var(--typio-letter-blue-color), 5px 5px black; }
      h1 div:nth-child(2) .letter { color: var(--typio-letter-yellow-color); box-shadow: 0px 0px transparent, 1px 1px var(--typio-letter-yellow-color), 2px 2px var(--typio-letter-yellow-color), 3px 3px var(--typio-letter-yellow-color), 4px 4px var(--typio-letter-yellow-color), 5px 5px black; }
      h1 div:nth-child(3) .letter { color: var(--typio-letter-orange-color); box-shadow: 0px 0px transparent, 1px 1px var(--typio-letter-orange-color), 2px 2px var(--typio-letter-orange-color), 3px 3px var(--typio-letter-orange-color), 4px 4px var(--typio-letter-orange-color), 5px 5px black; }
      h1 div:nth-child(4) .letter { color: var(--typio-letter-red-color); box-shadow: 0px 0px transparent, 1px 1px var(--typio-letter-red-color), 2px 2px var(--typio-letter-red-color), 3px 3px var(--typio-letter-red-color), 4px 4px var(--typio-letter-red-color), 5px 5px black; }
      h1 div:nth-child(5) .letter { color: var(--typio-letter-green-color); box-shadow: 0px 0px transparent, 1px 1px var(--typio-letter-green-color), 2px 2px var(--typio-letter-green-color), 3px 3px var(--typio-letter-green-color), 4px 4px var(--typio-letter-green-color), 5px 5px black; }

      @keyframes press1 {
       0%   { top: 0px; left: 0px; box-shadow: 0px 0px transparent, 1px 1px var(--typio-letter-blue-color), 2px 2px var(--typio-letter-blue-color), 3px 3px var(--typio-letter-blue-color), 4px 4px var(--typio-letter-blue-color), 5px 5px black; }
       10%   { top: 1px; left: 1px; box-shadow: 0px 0px transparent, 1px 1px var(--typio-letter-blue-color), 2px 2px var(--typio-letter-blue-color), 3px 3px var(--typio-letter-blue-color), 4px 4px black; }
       20%  { top: 2px; left: 2px; box-shadow: 0px 0px transparent, 1px 1px var(--typio-letter-blue-color), 2px 2px var(--typio-letter-blue-color), 3px 3px black; }
       30%  { top: 3px; left: 3px; box-shadow: 0px 0px transparent, 1px 1px var(--typio-letter-blue-color), 2px 2px black; }
       40%  { top: 5px; left: 5px; box-shadow: 0px 0px transparent, 1px 1px black; }
       60%  { top: 5px; left: 5px; box-shadow: 0px 0px transparent, 1px 1px black; }
       70%  { top: 3px; left: 3px; box-shadow: 0px 0px transparent, 1px 1px var(--typio-letter-blue-color), 2px 2px black; }
       80%  { top: 2px; left: 2px; box-shadow: 0px 0px transparent, 1px 1px var(--typio-letter-blue-color), 2px 2px var(--typio-letter-blue-color), 3px 3px black; }
       90%   { top: 1px; left: 1px; box-shadow: 0px 0px transparent, 1px 1px var(--typio-letter-blue-color), 2px 2px var(--typio-letter-blue-color), 3px 3px var(--typio-letter-blue-color), 4px 4px black; }
       100% { top: 0px; left: 0px; box-shadow: 0px 0px transparent, 1px 1px var(--typio-letter-blue-color), 2px 2px var(--typio-letter-blue-color), 3px 3px var(--typio-letter-blue-color), 4px 4px var(--typio-letter-blue-color), 5px 5px black; }
      }

      @keyframes press2 {
       0%   { top: 0px; left: 0px; box-shadow: 0px 0px transparent, 1px 1px var(--typio-letter-yellow-color), 2px 2px var(--typio-letter-yellow-color), 3px 3px var(--typio-letter-yellow-color), 4px 4px var(--typio-letter-yellow-color), 5px 5px black; }
       10%   { top: 1px; left: 1px; box-shadow: 0px 0px transparent, 1px 1px var(--typio-letter-yellow-color), 2px 2px var(--typio-letter-yellow-color), 3px 3px var(--typio-letter-yellow-color), 4px 4px black; }
       20%  { top: 2px; left: 2px; box-shadow: 0px 0px transparent, 1px 1px var(--typio-letter-yellow-color), 2px 2px var(--typio-letter-yellow-color), 3px 3px black; }
       30%  { top: 3px; left: 3px; box-shadow: 0px 0px transparent, 1px 1px var(--typio-letter-yellow-color), 2px 2px black; }
       40%  { top: 5px; left: 5px; box-shadow: 0px 0px transparent, 1px 1px black; }
       60%  { top: 5px; left: 5px; box-shadow: 0px 0px transparent, 1px 1px black; }
       70%  { top: 3px; left: 3px; box-shadow: 0px 0px transparent, 1px 1px var(--typio-letter-yellow-color), 2px 2px black; }
       80%  { top: 2px; left: 2px; box-shadow: 0px 0px transparent, 1px 1px var(--typio-letter-yellow-color), 2px 2px var(--typio-letter-yellow-color), 3px 3px black; }
       90%   { top: 1px; left: 1px; box-shadow: 0px 0px transparent, 1px 1px var(--typio-letter-yellow-color), 2px 2px var(--typio-letter-yellow-color), 3px 3px var(--typio-letter-yellow-color), 4px 4px black; }
       100% { top: 0px; left: 0px; box-shadow: 0px 0px transparent, 1px 1px var(--typio-letter-yellow-color), 2px 2px var(--typio-letter-yellow-color), 3px 3px var(--typio-letter-yellow-color), 4px 4px var(--typio-letter-yellow-color), 5px 5px black; }
      }

      @keyframes press3 {
       0%   { top: 0px; left: 0px; box-shadow: 0px 0px transparent, 1px 1px var(--typio-letter-orange-color), 2px 2px var(--typio-letter-orange-color), 3px 3px var(--typio-letter-orange-color), 4px 4px var(--typio-letter-orange-color), 5px 5px black; }
       10%   { top: 1px; left: 1px; box-shadow: 0px 0px transparent, 1px 1px var(--typio-letter-orange-color), 2px 2px var(--typio-letter-orange-color), 3px 3px var(--typio-letter-orange-color), 4px 4px black; }
       20%  { top: 2px; left: 2px; box-shadow: 0px 0px transparent, 1px 1px var(--typio-letter-orange-color), 2px 2px var(--typio-letter-orange-color), 3px 3px black; }
       30%  { top: 3px; left: 3px; box-shadow: 0px 0px transparent, 1px 1px var(--typio-letter-orange-color), 2px 2px black; }
       40%  { top: 5px; left: 5px; box-shadow: 0px 0px transparent, 1px 1px black; }
       60%  { top: 5px; left: 5px; box-shadow: 0px 0px transparent, 1px 1px black; }
       70%  { top: 3px; left: 3px; box-shadow: 0px 0px transparent, 1px 1px var(--typio-letter-orange-color), 2px 2px black; }
       80%  { top: 2px; left: 2px; box-shadow: 0px 0px transparent, 1px 1px var(--typio-letter-orange-color), 2px 2px var(--typio-letter-orange-color), 3px 3px black; }
       90%   { top: 1px; left: 1px; box-shadow: 0px 0px transparent, 1px 1px var(--typio-letter-orange-color), 2px 2px var(--typio-letter-orange-color), 3px 3px var(--typio-letter-orange-color), 4px 4px black; }
       100% { top: 0px; left: 0px; box-shadow: 0px 0px transparent, 1px 1px var(--typio-letter-orange-color), 2px 2px var(--typio-letter-orange-color), 3px 3px var(--typio-letter-orange-color), 4px 4px var(--typio-letter-orange-color), 5px 5px black; }
      }

      @keyframes press4 {
       0%   { top: 0px; left: 0px; box-shadow: 0px 0px transparent, 1px 1px var(--typio-letter-red-color), 2px 2px var(--typio-letter-red-color), 3px 3px var(--typio-letter-red-color), 4px 4px var(--typio-letter-red-color), 5px 5px black; }
       10%   { top: 1px; left: 1px; box-shadow: 0px 0px transparent, 1px 1px var(--typio-letter-red-color), 2px 2px var(--typio-letter-red-color), 3px 3px var(--typio-letter-red-color), 4px 4px black; }
       20%  { top: 2px; left: 2px; box-shadow: 0px 0px transparent, 1px 1px var(--typio-letter-red-color), 2px 2px var(--typio-letter-red-color), 3px 3px black; }
       30%  { top: 3px; left: 3px; box-shadow: 0px 0px transparent, 1px 1px var(--typio-letter-red-color), 2px 2px black; }
       40%  { top: 5px; left: 5px; box-shadow: 0px 0px transparent, 1px 1px black; }
       60%  { top: 5px; left: 5px; box-shadow: 0px 0px transparent, 1px 1px black; }
       70%  { top: 3px; left: 3px; box-shadow: 0px 0px transparent, 1px 1px var(--typio-letter-red-color), 2px 2px black; }
       80%  { top: 2px; left: 2px; box-shadow: 0px 0px transparent, 1px 1px var(--typio-letter-red-color), 2px 2px var(--typio-letter-red-color), 3px 3px black; }
       90%   { top: 1px; left: 1px; box-shadow: 0px 0px transparent, 1px 1px var(--typio-letter-red-color), 2px 2px var(--typio-letter-red-color), 3px 3px var(--typio-letter-red-color), 4px 4px black; }
       100% { top: 0px; left: 0px; box-shadow: 0px 0px transparent, 1px 1px var(--typio-letter-red-color), 2px 2px var(--typio-letter-red-color), 3px 3px var(--typio-letter-red-color), 4px 4px var(--typio-letter-red-color), 5px 5px black; }
      }

      @keyframes press5 {
       0%   { top: 0px; left: 0px; box-shadow: 0px 0px transparent, 1px 1px var(--typio-letter-green-color), 2px 2px var(--typio-letter-green-color), 3px 3px var(--typio-letter-green-color), 4px 4px var(--typio-letter-green-color), 5px 5px black; }
       10%   { top: 1px; left: 1px; box-shadow: 0px 0px transparent, 1px 1px var(--typio-letter-green-color), 2px 2px var(--typio-letter-green-color), 3px 3px var(--typio-letter-green-color), 4px 4px black; }
       20%  { top: 2px; left: 2px; box-shadow: 0px 0px transparent, 1px 1px var(--typio-letter-green-color), 2px 2px var(--typio-letter-green-color), 3px 3px black; }
       30%  { top: 3px; left: 3px; box-shadow: 0px 0px transparent, 1px 1px var(--typio-letter-green-color), 2px 2px black; }
       40%  { top: 5px; left: 5px; box-shadow: 0px 0px transparent, 1px 1px black; }
       60%  { top: 5px; left: 5px; box-shadow: 0px 0px transparent, 1px 1px black; }
       70%  { top: 3px; left: 3px; box-shadow: 0px 0px transparent, 1px 1px var(--typio-letter-green-color), 2px 2px black; }
       80%  { top: 2px; left: 2px; box-shadow: 0px 0px transparent, 1px 1px var(--typio-letter-green-color), 2px 2px var(--typio-letter-green-color), 3px 3px black; }
       90%   { top: 1px; left: 1px; box-shadow: 0px 0px transparent, 1px 1px var(--typio-letter-green-color), 2px 2px var(--typio-letter-green-color), 3px 3px var(--typio-letter-green-color), 4px 4px black; }
       100% { top: 0px; left: 0px; box-shadow: 0px 0px transparent, 1px 1px var(--typio-letter-green-color), 2px 2px var(--typio-letter-green-color), 3px 3px var(--typio-letter-green-color), 4px 4px var(--typio-letter-green-color), 5px 5px black; }
      }

      /*
       * Tagline
       */

       h2 {
         position: absolute;
         width: 400px;
         left: 50%;
         margin-left: -200px;
         color: white;
         top: 40vh;
         font-size: 35px;
         text-align: center;
       }

       h2 .title, h2 .typed-cursor {
         background-color: var(--typio-bg-color);
         padding: 10px 0;
         line-height: 2.2em;
       }

       h2 .typed-cursor {
       	opacity: 1;
        font-weight: 700;
        background-color: white;
        color: black;
        padding: 10px 10px;
       	animation: blink 0.7s infinite;
       }

       @keyframes blink {
       	0%   { opacity: 1; }
       	50%  { opacity: 0; }
       	100% { opacity: 1; }
       }

       h2 a {
         color: white;
         text-decoration: none;
         border-bottom: 4px dashed rgba(255, 255, 255, 0.4);
         cursor: help;
       }

       /*
        * Buttons
        */

       .buttons {
         position: absolute;
         width: 100%;
         top: 80vh;
         text-align: center;

       }
       .buttons {
         opacity: 1;
         transition: opacity 2s linear;
       }
       section.completed .buttons {
         opacity: 1;
       }
       typio-button {
         display: inline-block;
       }


    </style>

    <section id="intro">
      <h1>
        <div><span id="t" class="letter">T</span><span class="wave"></span></div>
        <div><span id="y" class="letter">Y</span><span class="wave"></span></div>
        <div><span id="p" class="letter">P</span><span class="wave"></span></div>
        <div><span id="i" class="letter">I</span><span class="wave"></span></div>
        <div><span id="o" class="letter">O</span><span class="wave"></span></div>
      </h1>
      <h2><span id="title" class="title"></span></h2>

      <div id="continue" class="buttons">
        <a href="/catalog"><typio-button>&#9166; Continue</typio-button></a>
      </div>
    </section>

  </template>

  <script>
    /**
     * Homepage.
     *
     * @customElement
     * @polymer
     */
    class TypioIntro extends Polymer.Element {
      static get is() { return 'typio-intro'; }
      static get properties() {
        return {};
      }

      ready() {
        super.ready();
        this.animate();
      }

      animate() {
        // Cache letter elements
        const letters = [
          this.$.t,
          this.$.y,
          this.$.p,
          this.$.i,
          this.$.o,
        ];

        let title = this.$.title;
        let intro = this.$.intro;

        intro.classList.add('loaded');

        setTimeout(function() {

          // Display the tagline
          var typed = new Typed(title, {
            strings: ["Practice Touch Typing^1000 <br>Deliberately"],
            smartBackspace: true,
            typeSpeed: 40,
            backDelay: 750,
            onComplete: function() {
              // Add CSS class to reveal additional buttons
              intro.classList.add('completed');

              // Add links to explain key terms
              setTimeout(() => title.innerHTML = 'Practice <a href="#">Touch Typing</a> <br><a href="#">Deliberately</a>', 1000);
            }
          });

        }, 2000);
      }

    }

    window.customElements.define(TypioIntro.is, TypioIntro);
  </script>
</dom-module>
